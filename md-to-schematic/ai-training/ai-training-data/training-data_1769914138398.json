{
  "metadata": {
    "created": "2026-02-01T02:48:58.396Z",
    "version": "1.0",
    "description": "PCB Design Training Data with Electronics Knowledge",
    "total_examples": 7
  },
  "electronics_knowledge": {
    "components": {
      "Raspberry Pi Pico": {
        "type": "Microcontroller",
        "voltage": {
          "operating": "3.3V",
          "input": "5V via USB"
        },
        "gpioVoltage": "3.3V",
        "maxCurrent": "300mA per GPIO",
        "totalGPIO": 26,
        "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
        "bestPractices": [
          "Add 0.1µF decoupling capacitor near each power pin",
          "Use 10kΩ pull-up/pull-down resistors on unused pins",
          "Protect GPIO with 220-330Ω series resistor for LEDs",
          "Maximum 16mA per GPIO pin"
        ]
      },
      "TSOP4838": {
        "type": "IR Receiver",
        "voltage": {
          "operating": "2.5V-5.5V"
        },
        "current": {
          "typical": "0.4mA",
          "max": "1.5mA"
        },
        "outputType": "Active Low (inverted)",
        "frequency": "38kHz",
        "knowledge": "Output is active LOW when IR detected. Needs decoupling.",
        "bestPractices": [
          "Place 0.1µF ceramic capacitor close to VCC pin",
          "Keep away from IR LEDs to prevent interference",
          "Shield from ambient light if possible",
          "Output can directly connect to 3.3V GPIO"
        ]
      },
      "74HC595": {
        "type": "Shift Register",
        "voltage": {
          "operating": "2V-6V"
        },
        "current": {
          "max": "70mA per output"
        },
        "outputs": 8,
        "cascadable": true,
        "knowledge": "8-bit serial-to-parallel shift register with output latches",
        "bestPractices": [
          "Add 0.1µF decoupling capacitor between VCC and GND",
          "Use 220-470Ω resistors on MOSFET gate connections",
          "Can cascade multiple 74HC595 using QH' pin",
          "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
          "Maximum clock frequency: 25MHz @ 5V"
        ]
      },
      "N-Channel MOSFET": {
        "type": "Transistor",
        "common": [
          "2N7000",
          "BS170",
          "IRLZ44N"
        ],
        "voltage": {
          "gateThreshold": "2-4V",
          "drainsource": "varies"
        },
        "knowledge": "Used for switching high-current loads",
        "bestPractices": [
          "Add 220-470Ω gate resistor to limit current",
          "Add 10kΩ pull-down resistor from gate to ground",
          "Use flyback diode for inductive loads",
          "Ensure Vgs > threshold voltage for full saturation",
          "Check Rds(on) for power dissipation calculation"
        ]
      },
      "TSAL6400": {
        "type": "IR LED",
        "voltage": {
          "forward": "1.35V typical, 1.6V max"
        },
        "current": {
          "continuous": "100mA",
          "peak": "1A (pulsed)"
        },
        "wavelength": "940nm",
        "knowledge": "High-power infrared LED for remote control applications",
        "bestPractices": [
          "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
          "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
          "Use MOSFET for switching (not direct from GPIO)",
          "Add heatsink if running continuous > 50mA",
          "Pulse at high current (500mA) with low duty cycle for better range"
        ]
      }
    },
    "designRules": {
      "power": {
        "description": "Power distribution and regulation rules",
        "rules": [
          "Always use common ground for all PCBs in system",
          "Add bulk capacitor (10µF-100µF) at power input",
          "Add 0.1µF ceramic capacitor near each IC",
          "Calculate total current draw to size power supply",
          "Use wider traces for power (>20mil for 500mA+)",
          "Add reverse polarity protection diode at input",
          "Consider TVS diode for industrial applications",
          "Separate analog and digital ground with single connection point"
        ]
      },
      "signals": {
        "description": "Signal routing and integrity",
        "rules": [
          "Keep high-speed signals short and direct",
          "Avoid 90-degree turns, use 45-degree bends",
          "Keep clock and data lines away from noisy signals",
          "Add series termination resistor (22-33Ω) for long traces",
          "Use differential pairs for critical signals",
          "Shield sensitive signals with ground plane",
          "Minimum 8mil trace width for signals",
          "Keep parallel signal traces spaced 3x trace width apart"
        ]
      },
      "thermal": {
        "description": "Heat management",
        "rules": [
          "Calculate power dissipation: P = I² × R",
          "Add thermal vias under hot components",
          "Ensure adequate copper area for heat spreading",
          "Leave space around components for airflow",
          "Consider heatsink for >1W dissipation",
          "Use thermal relief on ground pours for easier soldering",
          "Keep temperature-sensitive components away from heat sources"
        ]
      },
      "emc": {
        "description": "Electromagnetic compatibility",
        "rules": [
          "Use ground plane to reduce EMI",
          "Add ferrite bead on power input",
          "Route return current paths carefully",
          "Keep high-frequency circuits away from connectors",
          "Add filtering capacitors on all I/O lines",
          "Use shielded cables for off-board signals",
          "Follow 20-H rule for PCB stackup"
        ]
      }
    },
    "calculations": {
      "ledCurrentLimiting": {
        "formula": "R = (Vsupply - Vled) / I_desired",
        "example": "For 5V supply, 1.35V IR LED, 100mA: R = (5-1.35)/0.1 = 36.5Ω",
        "units": "Voltage in Volts, Current in Amps, Resistance in Ohms"
      },
      "powerDissipation": {
        "formula": "P = V × I = I² × R = V² / R",
        "example": "MOSFET with 0.5A, Rds(on) 0.1Ω: P = 0.5² × 0.1 = 0.025W (25mW)",
        "units": "Power in Watts"
      },
      "decouplingCapacitor": {
        "formula": "C = I × dt / dV",
        "typical": "0.1µF ceramic for each IC, 10-100µF bulk at input",
        "placement": "Within 10mm of IC power pins"
      },
      "traceWidth": {
        "formula": "Use PCB trace width calculator",
        "general": "8mil for signals, 20mil for 500mA, 50mil for 1A",
        "external": "External layers can carry more current than internal"
      }
    }
  },
  "training_examples": [
    {
      "instruction": "Design a PCB for: Dual PCB IR Control System – Schematic Connection Table",
      "input": {
        "requirements": [
          "Read 0 IR receivers",
          "Control 1 IR LEDs",
          "Use microcontroller for processing",
          "Interface between two PCBs",
          "5V power supply"
        ],
        "constraints": {
          "voltage": "5V power supply",
          "components_available": [
            null,
            "TSAL6400",
            "Raspberry Pi Pico",
            "74HC595"
          ]
        }
      },
      "output": {
        "design_analysis": {
          "design": "Dual PCB IR Control System – Schematic Connection Table",
          "timestamp": "2026-02-01T02:48:58.397Z",
          "components": [
            {
              "component": {
                "type": "MOSFET",
                "name": "Q1"
              },
              "electronics_knowledge": {},
              "function": "MOSFET Switch - Acts as electronic switch to control high-current IR LED.",
              "requirements": []
            },
            {
              "component": {
                "type": "IR_LED",
                "model": "TSAL6400",
                "channel": 1
              },
              "electronics_knowledge": {
                "type": "IR LED",
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "wavelength": "940nm",
                "knowledge": "High-power infrared LED for remote control applications",
                "bestPractices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ]
              },
              "function": "Infrared LED - Emits 940nm IR light for remote control transmission.",
              "requirements": {
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "best_practices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ],
                "required_components": [
                  {
                    "type": "resistor",
                    "value": "39Ω (for 100mA)",
                    "placement": "Series with LED",
                    "purpose": "Current limiting",
                    "calculation": "R = (5V - 1.35V) / 0.1A = 36.5Ω → use 39Ω"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "MCU",
                "model": "Raspberry Pi Pico",
                "name": "U1",
                "board": "PCB A"
              },
              "electronics_knowledge": {
                "type": "Microcontroller",
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "gpioVoltage": "3.3V",
                "maxCurrent": "300mA per GPIO",
                "totalGPIO": 26,
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ]
              },
              "function": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
              "requirements": {
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "Near each VCC pin",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "capacitor",
                    "value": "10µF",
                    "placement": "At power input",
                    "purpose": "Bulk filtering"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "SHIFT_REGISTER",
                "model": "74HC595",
                "name": "U2",
                "board": "PCB B"
              },
              "electronics_knowledge": {
                "type": "Shift Register",
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "outputs": 8,
                "cascadable": true,
                "knowledge": "8-bit serial-to-parallel shift register with output latches",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ]
              },
              "function": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
              "requirements": {
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "VCC to GND",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "resistor",
                    "value": "220-470Ω",
                    "placement": "On each output to MOSFET gate",
                    "purpose": "Current limiting"
                  }
                ]
              }
            }
          ],
          "connections": [
            {
              "connection": {
                "type": "CONTROL_SIGNAL",
                "from": {
                  "component": "Raspberry Pi Pico"
                },
                "to": {
                  "component": "74HC595"
                }
              },
              "signal_type": "Digital Control",
              "voltage_level": "3.3V Logic",
              "validation": {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              "recommendations": []
            },
            {
              "connection": {
                "from": {
                  "component": "74HC595"
                },
                "to": {
                  "component": "Q1",
                  "pin": "Gate"
                }
              },
              "signal_type": "MOSFET Gate Drive",
              "voltage_level": "5V Logic (HC family)",
              "validation": {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              "recommendations": [
                "Add 220-470Ω series resistor",
                "Add 10kΩ pull-down resistor gate-to-ground",
                "Keep gate trace short to prevent ringing"
              ]
            },
            {
              "connection": {
                "from": {
                  "component": "Q1",
                  "pin": "Drain"
                },
                "to": {
                  "pin": "Cathode"
                }
              },
              "signal_type": "General Signal",
              "voltage_level": "Verify voltage level",
              "validation": {
                "issues": [],
                "warnings": []
              },
              "recommendations": []
            }
          ],
          "validation": {
            "errors": [
              "Missing decoupling capacitors - Add 0.1µF near each IC"
            ],
            "warnings": [
              "Consider adding 10-100µF bulk capacitor at power input",
              "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
              "Calculate and add current-limiting resistors for each IR LED"
            ],
            "suggestions": [],
            "score": 75,
            "status": "FAIL"
          },
          "suggestions": [
            {
              "category": "Power",
              "suggestions": [
                "Add reverse polarity protection diode at power input",
                "Use TVS diode for ESD protection",
                "Add LED power indicator with 1kΩ resistor",
                "Consider adding test points for VCC and GND"
              ]
            },
            {
              "category": "Signal Integrity",
              "suggestions": [
                "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                "Use ground plane under signal traces",
                "Add series termination on long traces (>6 inches)",
                "Keep IR receivers away from IR LEDs"
              ]
            },
            {
              "category": "Testing & Debug",
              "suggestions": [
                "Add test points for each GPIO connection",
                "Include LED indicators for shift register outputs",
                "Add jumpers for easy debugging",
                "Label all connectors on silkscreen"
              ]
            },
            {
              "category": "Manufacturing",
              "suggestions": [
                "Add mounting holes (3.2mm for M3 screws)",
                "Keep components >5mm from board edge",
                "Add fiducial marks for automated assembly",
                "Include version number on silkscreen"
              ]
            }
          ],
          "calculations": {
            "led_resistor": {
              "description": "IR LED current limiting resistor",
              "formula": "R = (Vsupply - Vled) / I_desired",
              "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
              "standard_value": "39Ω (nearest E12 series)",
              "power_rating": "0.365W (use 0.25W resistor)",
              "actual_current": "93.6mA"
            },
            "power_budget": {
              "description": "Total system current draw",
              "breakdown": {
                "ir_receivers": "0 × 0.4mA = 0.0mA",
                "ir_leds": "1 × 100mA = 100mA",
                "ics": "2 × 20mA = 40mA"
              },
              "total": "140.0mA",
              "recommended_supply": "500mA",
              "power": "0.70W at 5V"
            },
            "trace_width": {
              "description": "Minimum trace width for current",
              "current": "140mA",
              "recommendation": "Use 20mil traces for power",
              "signal_traces": "8-10mil for digital signals"
            }
          }
        },
        "step_by_step_approach": [
          {
            "step": 1,
            "title": "Component Selection",
            "content": "Choose appropriate components based on requirements",
            "details": [
              {
                "reason": "MOSFET Switch - Acts as electronic switch to control high-current IR LED."
              },
              {
                "component": "TSAL6400",
                "reason": "Infrared LED - Emits 940nm IR light for remote control transmission.",
                "knowledge": "High-power infrared LED for remote control applications"
              },
              {
                "component": "Raspberry Pi Pico",
                "reason": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices."
              },
              {
                "component": "74HC595",
                "reason": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
                "knowledge": "8-bit serial-to-parallel shift register with output latches"
              }
            ]
          },
          {
            "step": 2,
            "title": "Calculate Passive Components",
            "content": "Determine resistor and capacitor values",
            "details": {
              "led_resistor": {
                "description": "IR LED current limiting resistor",
                "formula": "R = (Vsupply - Vled) / I_desired",
                "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
                "standard_value": "39Ω (nearest E12 series)",
                "power_rating": "0.365W (use 0.25W resistor)",
                "actual_current": "93.6mA"
              },
              "power_budget": {
                "description": "Total system current draw",
                "breakdown": {
                  "ir_receivers": "0 × 0.4mA = 0.0mA",
                  "ir_leds": "1 × 100mA = 100mA",
                  "ics": "2 × 20mA = 40mA"
                },
                "total": "140.0mA",
                "recommended_supply": "500mA",
                "power": "0.70W at 5V"
              },
              "trace_width": {
                "description": "Minimum trace width for current",
                "current": "140mA",
                "recommendation": "Use 20mil traces for power",
                "signal_traces": "8-10mil for digital signals"
              }
            }
          },
          {
            "step": 3,
            "title": "Validate Connections",
            "content": "Check voltage levels and current capacity",
            "details": [
              {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              {
                "issues": [],
                "warnings": []
              }
            ]
          },
          {
            "step": 4,
            "title": "Apply Best Practices",
            "content": "Add decoupling, protection, and filtering",
            "details": [
              {
                "category": "Power",
                "suggestions": [
                  "Add reverse polarity protection diode at power input",
                  "Use TVS diode for ESD protection",
                  "Add LED power indicator with 1kΩ resistor",
                  "Consider adding test points for VCC and GND"
                ]
              },
              {
                "category": "Signal Integrity",
                "suggestions": [
                  "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                  "Use ground plane under signal traces",
                  "Add series termination on long traces (>6 inches)",
                  "Keep IR receivers away from IR LEDs"
                ]
              },
              {
                "category": "Testing & Debug",
                "suggestions": [
                  "Add test points for each GPIO connection",
                  "Include LED indicators for shift register outputs",
                  "Add jumpers for easy debugging",
                  "Label all connectors on silkscreen"
                ]
              },
              {
                "category": "Manufacturing",
                "suggestions": [
                  "Add mounting holes (3.2mm for M3 screws)",
                  "Keep components >5mm from board edge",
                  "Add fiducial marks for automated assembly",
                  "Include version number on silkscreen"
                ]
              }
            ]
          },
          {
            "step": 5,
            "title": "Design Validation",
            "content": "Review design for errors and improvements",
            "details": {
              "errors": [
                "Missing decoupling capacitors - Add 0.1µF near each IC"
              ],
              "warnings": [
                "Consider adding 10-100µF bulk capacitor at power input",
                "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
                "Calculate and add current-limiting resistors for each IR LED"
              ],
              "suggestions": [],
              "score": 75,
              "status": "FAIL"
            }
          }
        ],
        "easyeda_schematic_plan": {
          "placement": "Organize components in logical groups",
          "routing": "Route power first, then signals",
          "ground_plane": "Use polygon pour for ground",
          "silkscreen": "Label all components and test points"
        }
      },
      "electronics_principles": {
        "relevant_concepts": [
          {
            "concept": "Digital Logic Levels",
            "explanation": "3.3V and 5V logic compatibility. Ensure voltage levels match or use level shifters.",
            "application": "Raspberry Pi Pico (3.3V) interfacing with 74HC595 (can run 2-6V)"
          },
          {
            "concept": "Current Limiting",
            "explanation": "LEDs need current-limiting resistors. Calculate using Ohm's Law: R = (Vsupply - Vled) / I",
            "application": "IR LEDs running at 100mA need 39Ω resistor from 5V supply"
          },
          {
            "concept": "Decoupling Capacitors",
            "explanation": "Filter noise on power supply. Place 0.1µF ceramic cap near each IC.",
            "application": "Prevents voltage droops during switching, improves signal integrity"
          },
          {
            "concept": "MOSFET Switching",
            "explanation": "MOSFETs act as electronic switches. Gate voltage controls drain-source conduction.",
            "application": "Switch high-current IR LEDs without overloading GPIO pins"
          },
          {
            "concept": "Shift Registers",
            "explanation": "Convert serial data to parallel outputs. Expand limited GPIO pins.",
            "application": "74HC595 provides 8 outputs using only 3 control pins"
          }
        ],
        "physics": [
          {
            "principle": "Ohm's Law",
            "formula": "V = I × R",
            "application": "Calculate resistor values for current limiting",
            "example": "For 100mA through LED: R = (5V - 1.35V) / 0.1A = 36.5Ω"
          },
          {
            "principle": "Power Dissipation",
            "formula": "P = V × I = I² × R",
            "application": "Determine component power ratings and heat generation",
            "example": "Resistor: P = 0.1² × 39 = 0.39W (use 0.5W resistor)"
          },
          {
            "principle": "Capacitor Charge/Discharge",
            "formula": "Q = C × V, τ = R × C",
            "application": "Filter power supply noise and smooth voltage",
            "example": "0.1µF cap filters high-frequency noise, 100µF handles load transients"
          },
          {
            "principle": "Electromagnetic Induction",
            "formula": "V = -L × dI/dt",
            "application": "Inductive loads need flyback diodes",
            "example": "Not applicable for LEDs, but critical for motors/relays"
          },
          {
            "principle": "Signal Integrity",
            "formula": "Z₀ = √(L/C), tr < 2×td",
            "application": "Transmission line effects on high-speed signals",
            "example": "SPI signals at 25MHz need controlled impedance traces"
          }
        ],
        "design_rules": {
          "power": {
            "description": "Power distribution and regulation rules",
            "rules": [
              "Always use common ground for all PCBs in system",
              "Add bulk capacitor (10µF-100µF) at power input",
              "Add 0.1µF ceramic capacitor near each IC",
              "Calculate total current draw to size power supply",
              "Use wider traces for power (>20mil for 500mA+)",
              "Add reverse polarity protection diode at input",
              "Consider TVS diode for industrial applications",
              "Separate analog and digital ground with single connection point"
            ]
          },
          "signals": {
            "description": "Signal routing and integrity",
            "rules": [
              "Keep high-speed signals short and direct",
              "Avoid 90-degree turns, use 45-degree bends",
              "Keep clock and data lines away from noisy signals",
              "Add series termination resistor (22-33Ω) for long traces",
              "Use differential pairs for critical signals",
              "Shield sensitive signals with ground plane",
              "Minimum 8mil trace width for signals",
              "Keep parallel signal traces spaced 3x trace width apart"
            ]
          },
          "thermal": {
            "description": "Heat management",
            "rules": [
              "Calculate power dissipation: P = I² × R",
              "Add thermal vias under hot components",
              "Ensure adequate copper area for heat spreading",
              "Leave space around components for airflow",
              "Consider heatsink for >1W dissipation",
              "Use thermal relief on ground pours for easier soldering",
              "Keep temperature-sensitive components away from heat sources"
            ]
          },
          "emc": {
            "description": "Electromagnetic compatibility",
            "rules": [
              "Use ground plane to reduce EMI",
              "Add ferrite bead on power input",
              "Route return current paths carefully",
              "Keep high-frequency circuits away from connectors",
              "Add filtering capacitors on all I/O lines",
              "Use shielded cables for off-board signals",
              "Follow 20-H rule for PCB stackup"
            ]
          }
        }
      }
    },
    {
      "instruction": "Design a PCB for: Dual PCB IR Control System – Schematic Connection Table",
      "input": {
        "requirements": [
          "Read 0 IR receivers",
          "Control 1 IR LEDs",
          "Use microcontroller for processing",
          "Interface between two PCBs",
          "5V power supply"
        ],
        "constraints": {
          "voltage": "5V power supply",
          "components_available": [
            null,
            "TSAL6400",
            "Raspberry Pi Pico",
            "74HC595"
          ]
        }
      },
      "output": {
        "design_analysis": {
          "design": "Dual PCB IR Control System – Schematic Connection Table",
          "timestamp": "2026-02-01T02:48:58.397Z",
          "components": [
            {
              "component": {
                "type": "MOSFET",
                "name": "Q1"
              },
              "electronics_knowledge": {},
              "function": "MOSFET Switch - Acts as electronic switch to control high-current IR LED.",
              "requirements": []
            },
            {
              "component": {
                "type": "IR_LED",
                "model": "TSAL6400",
                "channel": 1
              },
              "electronics_knowledge": {
                "type": "IR LED",
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "wavelength": "940nm",
                "knowledge": "High-power infrared LED for remote control applications",
                "bestPractices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ]
              },
              "function": "Infrared LED - Emits 940nm IR light for remote control transmission.",
              "requirements": {
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "best_practices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ],
                "required_components": [
                  {
                    "type": "resistor",
                    "value": "39Ω (for 100mA)",
                    "placement": "Series with LED",
                    "purpose": "Current limiting",
                    "calculation": "R = (5V - 1.35V) / 0.1A = 36.5Ω → use 39Ω"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "MCU",
                "model": "Raspberry Pi Pico",
                "name": "U1",
                "board": "PCB A"
              },
              "electronics_knowledge": {
                "type": "Microcontroller",
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "gpioVoltage": "3.3V",
                "maxCurrent": "300mA per GPIO",
                "totalGPIO": 26,
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ]
              },
              "function": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
              "requirements": {
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "Near each VCC pin",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "capacitor",
                    "value": "10µF",
                    "placement": "At power input",
                    "purpose": "Bulk filtering"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "SHIFT_REGISTER",
                "model": "74HC595",
                "name": "U2",
                "board": "PCB B"
              },
              "electronics_knowledge": {
                "type": "Shift Register",
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "outputs": 8,
                "cascadable": true,
                "knowledge": "8-bit serial-to-parallel shift register with output latches",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ]
              },
              "function": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
              "requirements": {
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "VCC to GND",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "resistor",
                    "value": "220-470Ω",
                    "placement": "On each output to MOSFET gate",
                    "purpose": "Current limiting"
                  }
                ]
              }
            }
          ],
          "connections": [
            {
              "connection": {
                "type": "CONTROL_SIGNAL",
                "from": {
                  "component": "Raspberry Pi Pico"
                },
                "to": {
                  "component": "74HC595"
                }
              },
              "signal_type": "Digital Control",
              "voltage_level": "3.3V Logic",
              "validation": {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              "recommendations": []
            },
            {
              "connection": {
                "from": {
                  "component": "74HC595"
                },
                "to": {
                  "component": "Q1",
                  "pin": "Gate"
                }
              },
              "signal_type": "MOSFET Gate Drive",
              "voltage_level": "5V Logic (HC family)",
              "validation": {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              "recommendations": [
                "Add 220-470Ω series resistor",
                "Add 10kΩ pull-down resistor gate-to-ground",
                "Keep gate trace short to prevent ringing"
              ]
            },
            {
              "connection": {
                "from": {
                  "component": "Q1",
                  "pin": "Drain"
                },
                "to": {
                  "pin": "Cathode"
                }
              },
              "signal_type": "General Signal",
              "voltage_level": "Verify voltage level",
              "validation": {
                "issues": [],
                "warnings": []
              },
              "recommendations": []
            }
          ],
          "validation": {
            "errors": [
              "Missing decoupling capacitors - Add 0.1µF near each IC"
            ],
            "warnings": [
              "Consider adding 10-100µF bulk capacitor at power input",
              "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
              "Calculate and add current-limiting resistors for each IR LED"
            ],
            "suggestions": [],
            "score": 75,
            "status": "FAIL"
          },
          "suggestions": [
            {
              "category": "Power",
              "suggestions": [
                "Add reverse polarity protection diode at power input",
                "Use TVS diode for ESD protection",
                "Add LED power indicator with 1kΩ resistor",
                "Consider adding test points for VCC and GND"
              ]
            },
            {
              "category": "Signal Integrity",
              "suggestions": [
                "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                "Use ground plane under signal traces",
                "Add series termination on long traces (>6 inches)",
                "Keep IR receivers away from IR LEDs"
              ]
            },
            {
              "category": "Testing & Debug",
              "suggestions": [
                "Add test points for each GPIO connection",
                "Include LED indicators for shift register outputs",
                "Add jumpers for easy debugging",
                "Label all connectors on silkscreen"
              ]
            },
            {
              "category": "Manufacturing",
              "suggestions": [
                "Add mounting holes (3.2mm for M3 screws)",
                "Keep components >5mm from board edge",
                "Add fiducial marks for automated assembly",
                "Include version number on silkscreen"
              ]
            }
          ],
          "calculations": {
            "led_resistor": {
              "description": "IR LED current limiting resistor",
              "formula": "R = (Vsupply - Vled) / I_desired",
              "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
              "standard_value": "39Ω (nearest E12 series)",
              "power_rating": "0.365W (use 0.25W resistor)",
              "actual_current": "93.6mA"
            },
            "power_budget": {
              "description": "Total system current draw",
              "breakdown": {
                "ir_receivers": "0 × 0.4mA = 0.0mA",
                "ir_leds": "1 × 100mA = 100mA",
                "ics": "2 × 20mA = 40mA"
              },
              "total": "140.0mA",
              "recommended_supply": "500mA",
              "power": "0.70W at 5V"
            },
            "trace_width": {
              "description": "Minimum trace width for current",
              "current": "140mA",
              "recommendation": "Use 20mil traces for power",
              "signal_traces": "8-10mil for digital signals"
            }
          }
        },
        "step_by_step_approach": [
          {
            "step": 1,
            "title": "Component Selection",
            "content": "Choose appropriate components based on requirements",
            "details": [
              {
                "reason": "MOSFET Switch - Acts as electronic switch to control high-current IR LED."
              },
              {
                "component": "TSAL6400",
                "reason": "Infrared LED - Emits 940nm IR light for remote control transmission.",
                "knowledge": "High-power infrared LED for remote control applications"
              },
              {
                "component": "Raspberry Pi Pico",
                "reason": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices."
              },
              {
                "component": "74HC595",
                "reason": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
                "knowledge": "8-bit serial-to-parallel shift register with output latches"
              }
            ]
          },
          {
            "step": 2,
            "title": "Calculate Passive Components",
            "content": "Determine resistor and capacitor values",
            "details": {
              "led_resistor": {
                "description": "IR LED current limiting resistor",
                "formula": "R = (Vsupply - Vled) / I_desired",
                "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
                "standard_value": "39Ω (nearest E12 series)",
                "power_rating": "0.365W (use 0.25W resistor)",
                "actual_current": "93.6mA"
              },
              "power_budget": {
                "description": "Total system current draw",
                "breakdown": {
                  "ir_receivers": "0 × 0.4mA = 0.0mA",
                  "ir_leds": "1 × 100mA = 100mA",
                  "ics": "2 × 20mA = 40mA"
                },
                "total": "140.0mA",
                "recommended_supply": "500mA",
                "power": "0.70W at 5V"
              },
              "trace_width": {
                "description": "Minimum trace width for current",
                "current": "140mA",
                "recommendation": "Use 20mil traces for power",
                "signal_traces": "8-10mil for digital signals"
              }
            }
          },
          {
            "step": 3,
            "title": "Validate Connections",
            "content": "Check voltage levels and current capacity",
            "details": [
              {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              {
                "issues": [],
                "warnings": []
              }
            ]
          },
          {
            "step": 4,
            "title": "Apply Best Practices",
            "content": "Add decoupling, protection, and filtering",
            "details": [
              {
                "category": "Power",
                "suggestions": [
                  "Add reverse polarity protection diode at power input",
                  "Use TVS diode for ESD protection",
                  "Add LED power indicator with 1kΩ resistor",
                  "Consider adding test points for VCC and GND"
                ]
              },
              {
                "category": "Signal Integrity",
                "suggestions": [
                  "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                  "Use ground plane under signal traces",
                  "Add series termination on long traces (>6 inches)",
                  "Keep IR receivers away from IR LEDs"
                ]
              },
              {
                "category": "Testing & Debug",
                "suggestions": [
                  "Add test points for each GPIO connection",
                  "Include LED indicators for shift register outputs",
                  "Add jumpers for easy debugging",
                  "Label all connectors on silkscreen"
                ]
              },
              {
                "category": "Manufacturing",
                "suggestions": [
                  "Add mounting holes (3.2mm for M3 screws)",
                  "Keep components >5mm from board edge",
                  "Add fiducial marks for automated assembly",
                  "Include version number on silkscreen"
                ]
              }
            ]
          },
          {
            "step": 5,
            "title": "Design Validation",
            "content": "Review design for errors and improvements",
            "details": {
              "errors": [
                "Missing decoupling capacitors - Add 0.1µF near each IC"
              ],
              "warnings": [
                "Consider adding 10-100µF bulk capacitor at power input",
                "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
                "Calculate and add current-limiting resistors for each IR LED"
              ],
              "suggestions": [],
              "score": 75,
              "status": "FAIL"
            }
          }
        ],
        "easyeda_schematic_plan": {
          "placement": "Organize components in logical groups",
          "routing": "Route power first, then signals",
          "ground_plane": "Use polygon pour for ground",
          "silkscreen": "Label all components and test points"
        }
      },
      "electronics_principles": {
        "relevant_concepts": [
          {
            "concept": "Digital Logic Levels",
            "explanation": "3.3V and 5V logic compatibility. Ensure voltage levels match or use level shifters.",
            "application": "Raspberry Pi Pico (3.3V) interfacing with 74HC595 (can run 2-6V)"
          },
          {
            "concept": "Current Limiting",
            "explanation": "LEDs need current-limiting resistors. Calculate using Ohm's Law: R = (Vsupply - Vled) / I",
            "application": "IR LEDs running at 100mA need 39Ω resistor from 5V supply"
          },
          {
            "concept": "Decoupling Capacitors",
            "explanation": "Filter noise on power supply. Place 0.1µF ceramic cap near each IC.",
            "application": "Prevents voltage droops during switching, improves signal integrity"
          },
          {
            "concept": "MOSFET Switching",
            "explanation": "MOSFETs act as electronic switches. Gate voltage controls drain-source conduction.",
            "application": "Switch high-current IR LEDs without overloading GPIO pins"
          },
          {
            "concept": "Shift Registers",
            "explanation": "Convert serial data to parallel outputs. Expand limited GPIO pins.",
            "application": "74HC595 provides 8 outputs using only 3 control pins"
          }
        ],
        "physics": [
          {
            "principle": "Ohm's Law",
            "formula": "V = I × R",
            "application": "Calculate resistor values for current limiting",
            "example": "For 100mA through LED: R = (5V - 1.35V) / 0.1A = 36.5Ω"
          },
          {
            "principle": "Power Dissipation",
            "formula": "P = V × I = I² × R",
            "application": "Determine component power ratings and heat generation",
            "example": "Resistor: P = 0.1² × 39 = 0.39W (use 0.5W resistor)"
          },
          {
            "principle": "Capacitor Charge/Discharge",
            "formula": "Q = C × V, τ = R × C",
            "application": "Filter power supply noise and smooth voltage",
            "example": "0.1µF cap filters high-frequency noise, 100µF handles load transients"
          },
          {
            "principle": "Electromagnetic Induction",
            "formula": "V = -L × dI/dt",
            "application": "Inductive loads need flyback diodes",
            "example": "Not applicable for LEDs, but critical for motors/relays"
          },
          {
            "principle": "Signal Integrity",
            "formula": "Z₀ = √(L/C), tr < 2×td",
            "application": "Transmission line effects on high-speed signals",
            "example": "SPI signals at 25MHz need controlled impedance traces"
          }
        ],
        "design_rules": {
          "power": {
            "description": "Power distribution and regulation rules",
            "rules": [
              "Always use common ground for all PCBs in system",
              "Add bulk capacitor (10µF-100µF) at power input",
              "Add 0.1µF ceramic capacitor near each IC",
              "Calculate total current draw to size power supply",
              "Use wider traces for power (>20mil for 500mA+)",
              "Add reverse polarity protection diode at input",
              "Consider TVS diode for industrial applications",
              "Separate analog and digital ground with single connection point"
            ]
          },
          "signals": {
            "description": "Signal routing and integrity",
            "rules": [
              "Keep high-speed signals short and direct",
              "Avoid 90-degree turns, use 45-degree bends",
              "Keep clock and data lines away from noisy signals",
              "Add series termination resistor (22-33Ω) for long traces",
              "Use differential pairs for critical signals",
              "Shield sensitive signals with ground plane",
              "Minimum 8mil trace width for signals",
              "Keep parallel signal traces spaced 3x trace width apart"
            ]
          },
          "thermal": {
            "description": "Heat management",
            "rules": [
              "Calculate power dissipation: P = I² × R",
              "Add thermal vias under hot components",
              "Ensure adequate copper area for heat spreading",
              "Leave space around components for airflow",
              "Consider heatsink for >1W dissipation",
              "Use thermal relief on ground pours for easier soldering",
              "Keep temperature-sensitive components away from heat sources"
            ]
          },
          "emc": {
            "description": "Electromagnetic compatibility",
            "rules": [
              "Use ground plane to reduce EMI",
              "Add ferrite bead on power input",
              "Route return current paths carefully",
              "Keep high-frequency circuits away from connectors",
              "Add filtering capacitors on all I/O lines",
              "Use shielded cables for off-board signals",
              "Follow 20-H rule for PCB stackup"
            ]
          }
        }
      }
    },
    {
      "instruction": "Design a PCB for: Dual PCB IR Control System – Schematic Connection Table",
      "input": {
        "requirements": [
          "Read 0 IR receivers",
          "Control 1 IR LEDs",
          "Use microcontroller for processing",
          "Interface between two PCBs",
          "5V power supply"
        ],
        "constraints": {
          "voltage": "5V power supply",
          "components_available": [
            null,
            "TSAL6400",
            "Raspberry Pi Pico",
            "74HC595"
          ]
        }
      },
      "output": {
        "design_analysis": {
          "design": "Dual PCB IR Control System – Schematic Connection Table",
          "timestamp": "2026-02-01T02:48:58.397Z",
          "components": [
            {
              "component": {
                "type": "MOSFET",
                "name": "Q1"
              },
              "electronics_knowledge": {},
              "function": "MOSFET Switch - Acts as electronic switch to control high-current IR LED.",
              "requirements": []
            },
            {
              "component": {
                "type": "IR_LED",
                "model": "TSAL6400",
                "channel": 1
              },
              "electronics_knowledge": {
                "type": "IR LED",
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "wavelength": "940nm",
                "knowledge": "High-power infrared LED for remote control applications",
                "bestPractices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ]
              },
              "function": "Infrared LED - Emits 940nm IR light for remote control transmission.",
              "requirements": {
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "best_practices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ],
                "required_components": [
                  {
                    "type": "resistor",
                    "value": "39Ω (for 100mA)",
                    "placement": "Series with LED",
                    "purpose": "Current limiting",
                    "calculation": "R = (5V - 1.35V) / 0.1A = 36.5Ω → use 39Ω"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "MCU",
                "model": "Raspberry Pi Pico",
                "name": "U1",
                "board": "PCB A"
              },
              "electronics_knowledge": {
                "type": "Microcontroller",
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "gpioVoltage": "3.3V",
                "maxCurrent": "300mA per GPIO",
                "totalGPIO": 26,
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ]
              },
              "function": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
              "requirements": {
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "Near each VCC pin",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "capacitor",
                    "value": "10µF",
                    "placement": "At power input",
                    "purpose": "Bulk filtering"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "SHIFT_REGISTER",
                "model": "74HC595",
                "name": "U2",
                "board": "PCB B"
              },
              "electronics_knowledge": {
                "type": "Shift Register",
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "outputs": 8,
                "cascadable": true,
                "knowledge": "8-bit serial-to-parallel shift register with output latches",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ]
              },
              "function": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
              "requirements": {
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "VCC to GND",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "resistor",
                    "value": "220-470Ω",
                    "placement": "On each output to MOSFET gate",
                    "purpose": "Current limiting"
                  }
                ]
              }
            }
          ],
          "connections": [
            {
              "connection": {
                "type": "CONTROL_SIGNAL",
                "from": {
                  "component": "Raspberry Pi Pico"
                },
                "to": {
                  "component": "74HC595"
                }
              },
              "signal_type": "Digital Control",
              "voltage_level": "3.3V Logic",
              "validation": {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              "recommendations": []
            },
            {
              "connection": {
                "from": {
                  "component": "74HC595"
                },
                "to": {
                  "component": "Q1",
                  "pin": "Gate"
                }
              },
              "signal_type": "MOSFET Gate Drive",
              "voltage_level": "5V Logic (HC family)",
              "validation": {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              "recommendations": [
                "Add 220-470Ω series resistor",
                "Add 10kΩ pull-down resistor gate-to-ground",
                "Keep gate trace short to prevent ringing"
              ]
            },
            {
              "connection": {
                "from": {
                  "component": "Q1",
                  "pin": "Drain"
                },
                "to": {
                  "pin": "Cathode"
                }
              },
              "signal_type": "General Signal",
              "voltage_level": "Verify voltage level",
              "validation": {
                "issues": [],
                "warnings": []
              },
              "recommendations": []
            }
          ],
          "validation": {
            "errors": [
              "Missing decoupling capacitors - Add 0.1µF near each IC"
            ],
            "warnings": [
              "Consider adding 10-100µF bulk capacitor at power input",
              "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
              "Calculate and add current-limiting resistors for each IR LED"
            ],
            "suggestions": [],
            "score": 75,
            "status": "FAIL"
          },
          "suggestions": [
            {
              "category": "Power",
              "suggestions": [
                "Add reverse polarity protection diode at power input",
                "Use TVS diode for ESD protection",
                "Add LED power indicator with 1kΩ resistor",
                "Consider adding test points for VCC and GND"
              ]
            },
            {
              "category": "Signal Integrity",
              "suggestions": [
                "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                "Use ground plane under signal traces",
                "Add series termination on long traces (>6 inches)",
                "Keep IR receivers away from IR LEDs"
              ]
            },
            {
              "category": "Testing & Debug",
              "suggestions": [
                "Add test points for each GPIO connection",
                "Include LED indicators for shift register outputs",
                "Add jumpers for easy debugging",
                "Label all connectors on silkscreen"
              ]
            },
            {
              "category": "Manufacturing",
              "suggestions": [
                "Add mounting holes (3.2mm for M3 screws)",
                "Keep components >5mm from board edge",
                "Add fiducial marks for automated assembly",
                "Include version number on silkscreen"
              ]
            }
          ],
          "calculations": {
            "led_resistor": {
              "description": "IR LED current limiting resistor",
              "formula": "R = (Vsupply - Vled) / I_desired",
              "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
              "standard_value": "39Ω (nearest E12 series)",
              "power_rating": "0.365W (use 0.25W resistor)",
              "actual_current": "93.6mA"
            },
            "power_budget": {
              "description": "Total system current draw",
              "breakdown": {
                "ir_receivers": "0 × 0.4mA = 0.0mA",
                "ir_leds": "1 × 100mA = 100mA",
                "ics": "2 × 20mA = 40mA"
              },
              "total": "140.0mA",
              "recommended_supply": "500mA",
              "power": "0.70W at 5V"
            },
            "trace_width": {
              "description": "Minimum trace width for current",
              "current": "140mA",
              "recommendation": "Use 20mil traces for power",
              "signal_traces": "8-10mil for digital signals"
            }
          }
        },
        "step_by_step_approach": [
          {
            "step": 1,
            "title": "Component Selection",
            "content": "Choose appropriate components based on requirements",
            "details": [
              {
                "reason": "MOSFET Switch - Acts as electronic switch to control high-current IR LED."
              },
              {
                "component": "TSAL6400",
                "reason": "Infrared LED - Emits 940nm IR light for remote control transmission.",
                "knowledge": "High-power infrared LED for remote control applications"
              },
              {
                "component": "Raspberry Pi Pico",
                "reason": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices."
              },
              {
                "component": "74HC595",
                "reason": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
                "knowledge": "8-bit serial-to-parallel shift register with output latches"
              }
            ]
          },
          {
            "step": 2,
            "title": "Calculate Passive Components",
            "content": "Determine resistor and capacitor values",
            "details": {
              "led_resistor": {
                "description": "IR LED current limiting resistor",
                "formula": "R = (Vsupply - Vled) / I_desired",
                "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
                "standard_value": "39Ω (nearest E12 series)",
                "power_rating": "0.365W (use 0.25W resistor)",
                "actual_current": "93.6mA"
              },
              "power_budget": {
                "description": "Total system current draw",
                "breakdown": {
                  "ir_receivers": "0 × 0.4mA = 0.0mA",
                  "ir_leds": "1 × 100mA = 100mA",
                  "ics": "2 × 20mA = 40mA"
                },
                "total": "140.0mA",
                "recommended_supply": "500mA",
                "power": "0.70W at 5V"
              },
              "trace_width": {
                "description": "Minimum trace width for current",
                "current": "140mA",
                "recommendation": "Use 20mil traces for power",
                "signal_traces": "8-10mil for digital signals"
              }
            }
          },
          {
            "step": 3,
            "title": "Validate Connections",
            "content": "Check voltage levels and current capacity",
            "details": [
              {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              {
                "issues": [],
                "warnings": []
              }
            ]
          },
          {
            "step": 4,
            "title": "Apply Best Practices",
            "content": "Add decoupling, protection, and filtering",
            "details": [
              {
                "category": "Power",
                "suggestions": [
                  "Add reverse polarity protection diode at power input",
                  "Use TVS diode for ESD protection",
                  "Add LED power indicator with 1kΩ resistor",
                  "Consider adding test points for VCC and GND"
                ]
              },
              {
                "category": "Signal Integrity",
                "suggestions": [
                  "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                  "Use ground plane under signal traces",
                  "Add series termination on long traces (>6 inches)",
                  "Keep IR receivers away from IR LEDs"
                ]
              },
              {
                "category": "Testing & Debug",
                "suggestions": [
                  "Add test points for each GPIO connection",
                  "Include LED indicators for shift register outputs",
                  "Add jumpers for easy debugging",
                  "Label all connectors on silkscreen"
                ]
              },
              {
                "category": "Manufacturing",
                "suggestions": [
                  "Add mounting holes (3.2mm for M3 screws)",
                  "Keep components >5mm from board edge",
                  "Add fiducial marks for automated assembly",
                  "Include version number on silkscreen"
                ]
              }
            ]
          },
          {
            "step": 5,
            "title": "Design Validation",
            "content": "Review design for errors and improvements",
            "details": {
              "errors": [
                "Missing decoupling capacitors - Add 0.1µF near each IC"
              ],
              "warnings": [
                "Consider adding 10-100µF bulk capacitor at power input",
                "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
                "Calculate and add current-limiting resistors for each IR LED"
              ],
              "suggestions": [],
              "score": 75,
              "status": "FAIL"
            }
          }
        ],
        "easyeda_schematic_plan": {
          "placement": "Organize components in logical groups",
          "routing": "Route power first, then signals",
          "ground_plane": "Use polygon pour for ground",
          "silkscreen": "Label all components and test points"
        }
      },
      "electronics_principles": {
        "relevant_concepts": [
          {
            "concept": "Digital Logic Levels",
            "explanation": "3.3V and 5V logic compatibility. Ensure voltage levels match or use level shifters.",
            "application": "Raspberry Pi Pico (3.3V) interfacing with 74HC595 (can run 2-6V)"
          },
          {
            "concept": "Current Limiting",
            "explanation": "LEDs need current-limiting resistors. Calculate using Ohm's Law: R = (Vsupply - Vled) / I",
            "application": "IR LEDs running at 100mA need 39Ω resistor from 5V supply"
          },
          {
            "concept": "Decoupling Capacitors",
            "explanation": "Filter noise on power supply. Place 0.1µF ceramic cap near each IC.",
            "application": "Prevents voltage droops during switching, improves signal integrity"
          },
          {
            "concept": "MOSFET Switching",
            "explanation": "MOSFETs act as electronic switches. Gate voltage controls drain-source conduction.",
            "application": "Switch high-current IR LEDs without overloading GPIO pins"
          },
          {
            "concept": "Shift Registers",
            "explanation": "Convert serial data to parallel outputs. Expand limited GPIO pins.",
            "application": "74HC595 provides 8 outputs using only 3 control pins"
          }
        ],
        "physics": [
          {
            "principle": "Ohm's Law",
            "formula": "V = I × R",
            "application": "Calculate resistor values for current limiting",
            "example": "For 100mA through LED: R = (5V - 1.35V) / 0.1A = 36.5Ω"
          },
          {
            "principle": "Power Dissipation",
            "formula": "P = V × I = I² × R",
            "application": "Determine component power ratings and heat generation",
            "example": "Resistor: P = 0.1² × 39 = 0.39W (use 0.5W resistor)"
          },
          {
            "principle": "Capacitor Charge/Discharge",
            "formula": "Q = C × V, τ = R × C",
            "application": "Filter power supply noise and smooth voltage",
            "example": "0.1µF cap filters high-frequency noise, 100µF handles load transients"
          },
          {
            "principle": "Electromagnetic Induction",
            "formula": "V = -L × dI/dt",
            "application": "Inductive loads need flyback diodes",
            "example": "Not applicable for LEDs, but critical for motors/relays"
          },
          {
            "principle": "Signal Integrity",
            "formula": "Z₀ = √(L/C), tr < 2×td",
            "application": "Transmission line effects on high-speed signals",
            "example": "SPI signals at 25MHz need controlled impedance traces"
          }
        ],
        "design_rules": {
          "power": {
            "description": "Power distribution and regulation rules",
            "rules": [
              "Always use common ground for all PCBs in system",
              "Add bulk capacitor (10µF-100µF) at power input",
              "Add 0.1µF ceramic capacitor near each IC",
              "Calculate total current draw to size power supply",
              "Use wider traces for power (>20mil for 500mA+)",
              "Add reverse polarity protection diode at input",
              "Consider TVS diode for industrial applications",
              "Separate analog and digital ground with single connection point"
            ]
          },
          "signals": {
            "description": "Signal routing and integrity",
            "rules": [
              "Keep high-speed signals short and direct",
              "Avoid 90-degree turns, use 45-degree bends",
              "Keep clock and data lines away from noisy signals",
              "Add series termination resistor (22-33Ω) for long traces",
              "Use differential pairs for critical signals",
              "Shield sensitive signals with ground plane",
              "Minimum 8mil trace width for signals",
              "Keep parallel signal traces spaced 3x trace width apart"
            ]
          },
          "thermal": {
            "description": "Heat management",
            "rules": [
              "Calculate power dissipation: P = I² × R",
              "Add thermal vias under hot components",
              "Ensure adequate copper area for heat spreading",
              "Leave space around components for airflow",
              "Consider heatsink for >1W dissipation",
              "Use thermal relief on ground pours for easier soldering",
              "Keep temperature-sensitive components away from heat sources"
            ]
          },
          "emc": {
            "description": "Electromagnetic compatibility",
            "rules": [
              "Use ground plane to reduce EMI",
              "Add ferrite bead on power input",
              "Route return current paths carefully",
              "Keep high-frequency circuits away from connectors",
              "Add filtering capacitors on all I/O lines",
              "Use shielded cables for off-board signals",
              "Follow 20-H rule for PCB stackup"
            ]
          }
        }
      }
    },
    {
      "instruction": "Design a PCB for: Dual PCB IR Control System – Schematic Connection Table",
      "input": {
        "requirements": [
          "Read 0 IR receivers",
          "Control 1 IR LEDs",
          "Use microcontroller for processing",
          "Interface between two PCBs",
          "5V power supply"
        ],
        "constraints": {
          "voltage": "5V power supply",
          "components_available": [
            null,
            "TSAL6400",
            "Raspberry Pi Pico",
            "74HC595"
          ]
        }
      },
      "output": {
        "design_analysis": {
          "design": "Dual PCB IR Control System – Schematic Connection Table",
          "timestamp": "2026-02-01T02:48:58.398Z",
          "components": [
            {
              "component": {
                "type": "MOSFET",
                "name": "Q1"
              },
              "electronics_knowledge": {},
              "function": "MOSFET Switch - Acts as electronic switch to control high-current IR LED.",
              "requirements": []
            },
            {
              "component": {
                "type": "IR_LED",
                "model": "TSAL6400",
                "channel": 1
              },
              "electronics_knowledge": {
                "type": "IR LED",
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "wavelength": "940nm",
                "knowledge": "High-power infrared LED for remote control applications",
                "bestPractices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ]
              },
              "function": "Infrared LED - Emits 940nm IR light for remote control transmission.",
              "requirements": {
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "best_practices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ],
                "required_components": [
                  {
                    "type": "resistor",
                    "value": "39Ω (for 100mA)",
                    "placement": "Series with LED",
                    "purpose": "Current limiting",
                    "calculation": "R = (5V - 1.35V) / 0.1A = 36.5Ω → use 39Ω"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "MCU",
                "model": "Raspberry Pi Pico",
                "name": "U1",
                "board": "PCB A"
              },
              "electronics_knowledge": {
                "type": "Microcontroller",
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "gpioVoltage": "3.3V",
                "maxCurrent": "300mA per GPIO",
                "totalGPIO": 26,
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ]
              },
              "function": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
              "requirements": {
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "Near each VCC pin",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "capacitor",
                    "value": "10µF",
                    "placement": "At power input",
                    "purpose": "Bulk filtering"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "SHIFT_REGISTER",
                "model": "74HC595",
                "name": "U2",
                "board": "PCB B"
              },
              "electronics_knowledge": {
                "type": "Shift Register",
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "outputs": 8,
                "cascadable": true,
                "knowledge": "8-bit serial-to-parallel shift register with output latches",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ]
              },
              "function": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
              "requirements": {
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "VCC to GND",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "resistor",
                    "value": "220-470Ω",
                    "placement": "On each output to MOSFET gate",
                    "purpose": "Current limiting"
                  }
                ]
              }
            }
          ],
          "connections": [
            {
              "connection": {
                "type": "CONTROL_SIGNAL",
                "from": {
                  "component": "Raspberry Pi Pico"
                },
                "to": {
                  "component": "74HC595"
                }
              },
              "signal_type": "Digital Control",
              "voltage_level": "3.3V Logic",
              "validation": {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              "recommendations": []
            },
            {
              "connection": {
                "from": {
                  "component": "74HC595"
                },
                "to": {
                  "component": "Q1",
                  "pin": "Gate"
                }
              },
              "signal_type": "MOSFET Gate Drive",
              "voltage_level": "5V Logic (HC family)",
              "validation": {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              "recommendations": [
                "Add 220-470Ω series resistor",
                "Add 10kΩ pull-down resistor gate-to-ground",
                "Keep gate trace short to prevent ringing"
              ]
            },
            {
              "connection": {
                "from": {
                  "component": "Q1",
                  "pin": "Drain"
                },
                "to": {
                  "pin": "Cathode"
                }
              },
              "signal_type": "General Signal",
              "voltage_level": "Verify voltage level",
              "validation": {
                "issues": [],
                "warnings": []
              },
              "recommendations": []
            }
          ],
          "validation": {
            "errors": [
              "Missing decoupling capacitors - Add 0.1µF near each IC"
            ],
            "warnings": [
              "Consider adding 10-100µF bulk capacitor at power input",
              "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
              "Calculate and add current-limiting resistors for each IR LED"
            ],
            "suggestions": [],
            "score": 75,
            "status": "FAIL"
          },
          "suggestions": [
            {
              "category": "Power",
              "suggestions": [
                "Add reverse polarity protection diode at power input",
                "Use TVS diode for ESD protection",
                "Add LED power indicator with 1kΩ resistor",
                "Consider adding test points for VCC and GND"
              ]
            },
            {
              "category": "Signal Integrity",
              "suggestions": [
                "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                "Use ground plane under signal traces",
                "Add series termination on long traces (>6 inches)",
                "Keep IR receivers away from IR LEDs"
              ]
            },
            {
              "category": "Testing & Debug",
              "suggestions": [
                "Add test points for each GPIO connection",
                "Include LED indicators for shift register outputs",
                "Add jumpers for easy debugging",
                "Label all connectors on silkscreen"
              ]
            },
            {
              "category": "Manufacturing",
              "suggestions": [
                "Add mounting holes (3.2mm for M3 screws)",
                "Keep components >5mm from board edge",
                "Add fiducial marks for automated assembly",
                "Include version number on silkscreen"
              ]
            }
          ],
          "calculations": {
            "led_resistor": {
              "description": "IR LED current limiting resistor",
              "formula": "R = (Vsupply - Vled) / I_desired",
              "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
              "standard_value": "39Ω (nearest E12 series)",
              "power_rating": "0.365W (use 0.25W resistor)",
              "actual_current": "93.6mA"
            },
            "power_budget": {
              "description": "Total system current draw",
              "breakdown": {
                "ir_receivers": "0 × 0.4mA = 0.0mA",
                "ir_leds": "1 × 100mA = 100mA",
                "ics": "2 × 20mA = 40mA"
              },
              "total": "140.0mA",
              "recommended_supply": "500mA",
              "power": "0.70W at 5V"
            },
            "trace_width": {
              "description": "Minimum trace width for current",
              "current": "140mA",
              "recommendation": "Use 20mil traces for power",
              "signal_traces": "8-10mil for digital signals"
            }
          }
        },
        "step_by_step_approach": [
          {
            "step": 1,
            "title": "Component Selection",
            "content": "Choose appropriate components based on requirements",
            "details": [
              {
                "reason": "MOSFET Switch - Acts as electronic switch to control high-current IR LED."
              },
              {
                "component": "TSAL6400",
                "reason": "Infrared LED - Emits 940nm IR light for remote control transmission.",
                "knowledge": "High-power infrared LED for remote control applications"
              },
              {
                "component": "Raspberry Pi Pico",
                "reason": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices."
              },
              {
                "component": "74HC595",
                "reason": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
                "knowledge": "8-bit serial-to-parallel shift register with output latches"
              }
            ]
          },
          {
            "step": 2,
            "title": "Calculate Passive Components",
            "content": "Determine resistor and capacitor values",
            "details": {
              "led_resistor": {
                "description": "IR LED current limiting resistor",
                "formula": "R = (Vsupply - Vled) / I_desired",
                "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
                "standard_value": "39Ω (nearest E12 series)",
                "power_rating": "0.365W (use 0.25W resistor)",
                "actual_current": "93.6mA"
              },
              "power_budget": {
                "description": "Total system current draw",
                "breakdown": {
                  "ir_receivers": "0 × 0.4mA = 0.0mA",
                  "ir_leds": "1 × 100mA = 100mA",
                  "ics": "2 × 20mA = 40mA"
                },
                "total": "140.0mA",
                "recommended_supply": "500mA",
                "power": "0.70W at 5V"
              },
              "trace_width": {
                "description": "Minimum trace width for current",
                "current": "140mA",
                "recommendation": "Use 20mil traces for power",
                "signal_traces": "8-10mil for digital signals"
              }
            }
          },
          {
            "step": 3,
            "title": "Validate Connections",
            "content": "Check voltage levels and current capacity",
            "details": [
              {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              {
                "issues": [],
                "warnings": []
              }
            ]
          },
          {
            "step": 4,
            "title": "Apply Best Practices",
            "content": "Add decoupling, protection, and filtering",
            "details": [
              {
                "category": "Power",
                "suggestions": [
                  "Add reverse polarity protection diode at power input",
                  "Use TVS diode for ESD protection",
                  "Add LED power indicator with 1kΩ resistor",
                  "Consider adding test points for VCC and GND"
                ]
              },
              {
                "category": "Signal Integrity",
                "suggestions": [
                  "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                  "Use ground plane under signal traces",
                  "Add series termination on long traces (>6 inches)",
                  "Keep IR receivers away from IR LEDs"
                ]
              },
              {
                "category": "Testing & Debug",
                "suggestions": [
                  "Add test points for each GPIO connection",
                  "Include LED indicators for shift register outputs",
                  "Add jumpers for easy debugging",
                  "Label all connectors on silkscreen"
                ]
              },
              {
                "category": "Manufacturing",
                "suggestions": [
                  "Add mounting holes (3.2mm for M3 screws)",
                  "Keep components >5mm from board edge",
                  "Add fiducial marks for automated assembly",
                  "Include version number on silkscreen"
                ]
              }
            ]
          },
          {
            "step": 5,
            "title": "Design Validation",
            "content": "Review design for errors and improvements",
            "details": {
              "errors": [
                "Missing decoupling capacitors - Add 0.1µF near each IC"
              ],
              "warnings": [
                "Consider adding 10-100µF bulk capacitor at power input",
                "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
                "Calculate and add current-limiting resistors for each IR LED"
              ],
              "suggestions": [],
              "score": 75,
              "status": "FAIL"
            }
          }
        ],
        "easyeda_schematic_plan": {
          "placement": "Organize components in logical groups",
          "routing": "Route power first, then signals",
          "ground_plane": "Use polygon pour for ground",
          "silkscreen": "Label all components and test points"
        }
      },
      "electronics_principles": {
        "relevant_concepts": [
          {
            "concept": "Digital Logic Levels",
            "explanation": "3.3V and 5V logic compatibility. Ensure voltage levels match or use level shifters.",
            "application": "Raspberry Pi Pico (3.3V) interfacing with 74HC595 (can run 2-6V)"
          },
          {
            "concept": "Current Limiting",
            "explanation": "LEDs need current-limiting resistors. Calculate using Ohm's Law: R = (Vsupply - Vled) / I",
            "application": "IR LEDs running at 100mA need 39Ω resistor from 5V supply"
          },
          {
            "concept": "Decoupling Capacitors",
            "explanation": "Filter noise on power supply. Place 0.1µF ceramic cap near each IC.",
            "application": "Prevents voltage droops during switching, improves signal integrity"
          },
          {
            "concept": "MOSFET Switching",
            "explanation": "MOSFETs act as electronic switches. Gate voltage controls drain-source conduction.",
            "application": "Switch high-current IR LEDs without overloading GPIO pins"
          },
          {
            "concept": "Shift Registers",
            "explanation": "Convert serial data to parallel outputs. Expand limited GPIO pins.",
            "application": "74HC595 provides 8 outputs using only 3 control pins"
          }
        ],
        "physics": [
          {
            "principle": "Ohm's Law",
            "formula": "V = I × R",
            "application": "Calculate resistor values for current limiting",
            "example": "For 100mA through LED: R = (5V - 1.35V) / 0.1A = 36.5Ω"
          },
          {
            "principle": "Power Dissipation",
            "formula": "P = V × I = I² × R",
            "application": "Determine component power ratings and heat generation",
            "example": "Resistor: P = 0.1² × 39 = 0.39W (use 0.5W resistor)"
          },
          {
            "principle": "Capacitor Charge/Discharge",
            "formula": "Q = C × V, τ = R × C",
            "application": "Filter power supply noise and smooth voltage",
            "example": "0.1µF cap filters high-frequency noise, 100µF handles load transients"
          },
          {
            "principle": "Electromagnetic Induction",
            "formula": "V = -L × dI/dt",
            "application": "Inductive loads need flyback diodes",
            "example": "Not applicable for LEDs, but critical for motors/relays"
          },
          {
            "principle": "Signal Integrity",
            "formula": "Z₀ = √(L/C), tr < 2×td",
            "application": "Transmission line effects on high-speed signals",
            "example": "SPI signals at 25MHz need controlled impedance traces"
          }
        ],
        "design_rules": {
          "power": {
            "description": "Power distribution and regulation rules",
            "rules": [
              "Always use common ground for all PCBs in system",
              "Add bulk capacitor (10µF-100µF) at power input",
              "Add 0.1µF ceramic capacitor near each IC",
              "Calculate total current draw to size power supply",
              "Use wider traces for power (>20mil for 500mA+)",
              "Add reverse polarity protection diode at input",
              "Consider TVS diode for industrial applications",
              "Separate analog and digital ground with single connection point"
            ]
          },
          "signals": {
            "description": "Signal routing and integrity",
            "rules": [
              "Keep high-speed signals short and direct",
              "Avoid 90-degree turns, use 45-degree bends",
              "Keep clock and data lines away from noisy signals",
              "Add series termination resistor (22-33Ω) for long traces",
              "Use differential pairs for critical signals",
              "Shield sensitive signals with ground plane",
              "Minimum 8mil trace width for signals",
              "Keep parallel signal traces spaced 3x trace width apart"
            ]
          },
          "thermal": {
            "description": "Heat management",
            "rules": [
              "Calculate power dissipation: P = I² × R",
              "Add thermal vias under hot components",
              "Ensure adequate copper area for heat spreading",
              "Leave space around components for airflow",
              "Consider heatsink for >1W dissipation",
              "Use thermal relief on ground pours for easier soldering",
              "Keep temperature-sensitive components away from heat sources"
            ]
          },
          "emc": {
            "description": "Electromagnetic compatibility",
            "rules": [
              "Use ground plane to reduce EMI",
              "Add ferrite bead on power input",
              "Route return current paths carefully",
              "Keep high-frequency circuits away from connectors",
              "Add filtering capacitors on all I/O lines",
              "Use shielded cables for off-board signals",
              "Follow 20-H rule for PCB stackup"
            ]
          }
        }
      }
    },
    {
      "instruction": "Design a PCB for: Dual PCB IR Control System – Schematic Connection Table",
      "input": {
        "requirements": [
          "Read 0 IR receivers",
          "Control 1 IR LEDs",
          "Use microcontroller for processing",
          "Interface between two PCBs",
          "5V power supply"
        ],
        "constraints": {
          "voltage": "5V power supply",
          "components_available": [
            null,
            "TSAL6400",
            "Raspberry Pi Pico",
            "74HC595"
          ]
        }
      },
      "output": {
        "design_analysis": {
          "design": "Dual PCB IR Control System – Schematic Connection Table",
          "timestamp": "2026-02-01T02:48:58.398Z",
          "components": [
            {
              "component": {
                "type": "MOSFET",
                "name": "Q1"
              },
              "electronics_knowledge": {},
              "function": "MOSFET Switch - Acts as electronic switch to control high-current IR LED.",
              "requirements": []
            },
            {
              "component": {
                "type": "IR_LED",
                "model": "TSAL6400",
                "channel": 1
              },
              "electronics_knowledge": {
                "type": "IR LED",
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "wavelength": "940nm",
                "knowledge": "High-power infrared LED for remote control applications",
                "bestPractices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ]
              },
              "function": "Infrared LED - Emits 940nm IR light for remote control transmission.",
              "requirements": {
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "best_practices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ],
                "required_components": [
                  {
                    "type": "resistor",
                    "value": "39Ω (for 100mA)",
                    "placement": "Series with LED",
                    "purpose": "Current limiting",
                    "calculation": "R = (5V - 1.35V) / 0.1A = 36.5Ω → use 39Ω"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "MCU",
                "model": "Raspberry Pi Pico",
                "name": "U1",
                "board": "PCB A"
              },
              "electronics_knowledge": {
                "type": "Microcontroller",
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "gpioVoltage": "3.3V",
                "maxCurrent": "300mA per GPIO",
                "totalGPIO": 26,
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ]
              },
              "function": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
              "requirements": {
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "Near each VCC pin",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "capacitor",
                    "value": "10µF",
                    "placement": "At power input",
                    "purpose": "Bulk filtering"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "SHIFT_REGISTER",
                "model": "74HC595",
                "name": "U2",
                "board": "PCB B"
              },
              "electronics_knowledge": {
                "type": "Shift Register",
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "outputs": 8,
                "cascadable": true,
                "knowledge": "8-bit serial-to-parallel shift register with output latches",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ]
              },
              "function": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
              "requirements": {
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "VCC to GND",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "resistor",
                    "value": "220-470Ω",
                    "placement": "On each output to MOSFET gate",
                    "purpose": "Current limiting"
                  }
                ]
              }
            }
          ],
          "connections": [
            {
              "connection": {
                "type": "CONTROL_SIGNAL",
                "from": {
                  "component": "Raspberry Pi Pico"
                },
                "to": {
                  "component": "74HC595"
                }
              },
              "signal_type": "Digital Control",
              "voltage_level": "3.3V Logic",
              "validation": {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              "recommendations": []
            },
            {
              "connection": {
                "from": {
                  "component": "74HC595"
                },
                "to": {
                  "component": "Q1",
                  "pin": "Gate"
                }
              },
              "signal_type": "MOSFET Gate Drive",
              "voltage_level": "5V Logic (HC family)",
              "validation": {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              "recommendations": [
                "Add 220-470Ω series resistor",
                "Add 10kΩ pull-down resistor gate-to-ground",
                "Keep gate trace short to prevent ringing"
              ]
            },
            {
              "connection": {
                "from": {
                  "component": "Q1",
                  "pin": "Drain"
                },
                "to": {
                  "pin": "Cathode"
                }
              },
              "signal_type": "General Signal",
              "voltage_level": "Verify voltage level",
              "validation": {
                "issues": [],
                "warnings": []
              },
              "recommendations": []
            }
          ],
          "validation": {
            "errors": [
              "Missing decoupling capacitors - Add 0.1µF near each IC"
            ],
            "warnings": [
              "Consider adding 10-100µF bulk capacitor at power input",
              "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
              "Calculate and add current-limiting resistors for each IR LED"
            ],
            "suggestions": [],
            "score": 75,
            "status": "FAIL"
          },
          "suggestions": [
            {
              "category": "Power",
              "suggestions": [
                "Add reverse polarity protection diode at power input",
                "Use TVS diode for ESD protection",
                "Add LED power indicator with 1kΩ resistor",
                "Consider adding test points for VCC and GND"
              ]
            },
            {
              "category": "Signal Integrity",
              "suggestions": [
                "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                "Use ground plane under signal traces",
                "Add series termination on long traces (>6 inches)",
                "Keep IR receivers away from IR LEDs"
              ]
            },
            {
              "category": "Testing & Debug",
              "suggestions": [
                "Add test points for each GPIO connection",
                "Include LED indicators for shift register outputs",
                "Add jumpers for easy debugging",
                "Label all connectors on silkscreen"
              ]
            },
            {
              "category": "Manufacturing",
              "suggestions": [
                "Add mounting holes (3.2mm for M3 screws)",
                "Keep components >5mm from board edge",
                "Add fiducial marks for automated assembly",
                "Include version number on silkscreen"
              ]
            }
          ],
          "calculations": {
            "led_resistor": {
              "description": "IR LED current limiting resistor",
              "formula": "R = (Vsupply - Vled) / I_desired",
              "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
              "standard_value": "39Ω (nearest E12 series)",
              "power_rating": "0.365W (use 0.25W resistor)",
              "actual_current": "93.6mA"
            },
            "power_budget": {
              "description": "Total system current draw",
              "breakdown": {
                "ir_receivers": "0 × 0.4mA = 0.0mA",
                "ir_leds": "1 × 100mA = 100mA",
                "ics": "2 × 20mA = 40mA"
              },
              "total": "140.0mA",
              "recommended_supply": "500mA",
              "power": "0.70W at 5V"
            },
            "trace_width": {
              "description": "Minimum trace width for current",
              "current": "140mA",
              "recommendation": "Use 20mil traces for power",
              "signal_traces": "8-10mil for digital signals"
            }
          }
        },
        "step_by_step_approach": [
          {
            "step": 1,
            "title": "Component Selection",
            "content": "Choose appropriate components based on requirements",
            "details": [
              {
                "reason": "MOSFET Switch - Acts as electronic switch to control high-current IR LED."
              },
              {
                "component": "TSAL6400",
                "reason": "Infrared LED - Emits 940nm IR light for remote control transmission.",
                "knowledge": "High-power infrared LED for remote control applications"
              },
              {
                "component": "Raspberry Pi Pico",
                "reason": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices."
              },
              {
                "component": "74HC595",
                "reason": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
                "knowledge": "8-bit serial-to-parallel shift register with output latches"
              }
            ]
          },
          {
            "step": 2,
            "title": "Calculate Passive Components",
            "content": "Determine resistor and capacitor values",
            "details": {
              "led_resistor": {
                "description": "IR LED current limiting resistor",
                "formula": "R = (Vsupply - Vled) / I_desired",
                "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
                "standard_value": "39Ω (nearest E12 series)",
                "power_rating": "0.365W (use 0.25W resistor)",
                "actual_current": "93.6mA"
              },
              "power_budget": {
                "description": "Total system current draw",
                "breakdown": {
                  "ir_receivers": "0 × 0.4mA = 0.0mA",
                  "ir_leds": "1 × 100mA = 100mA",
                  "ics": "2 × 20mA = 40mA"
                },
                "total": "140.0mA",
                "recommended_supply": "500mA",
                "power": "0.70W at 5V"
              },
              "trace_width": {
                "description": "Minimum trace width for current",
                "current": "140mA",
                "recommendation": "Use 20mil traces for power",
                "signal_traces": "8-10mil for digital signals"
              }
            }
          },
          {
            "step": 3,
            "title": "Validate Connections",
            "content": "Check voltage levels and current capacity",
            "details": [
              {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              {
                "issues": [],
                "warnings": []
              }
            ]
          },
          {
            "step": 4,
            "title": "Apply Best Practices",
            "content": "Add decoupling, protection, and filtering",
            "details": [
              {
                "category": "Power",
                "suggestions": [
                  "Add reverse polarity protection diode at power input",
                  "Use TVS diode for ESD protection",
                  "Add LED power indicator with 1kΩ resistor",
                  "Consider adding test points for VCC and GND"
                ]
              },
              {
                "category": "Signal Integrity",
                "suggestions": [
                  "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                  "Use ground plane under signal traces",
                  "Add series termination on long traces (>6 inches)",
                  "Keep IR receivers away from IR LEDs"
                ]
              },
              {
                "category": "Testing & Debug",
                "suggestions": [
                  "Add test points for each GPIO connection",
                  "Include LED indicators for shift register outputs",
                  "Add jumpers for easy debugging",
                  "Label all connectors on silkscreen"
                ]
              },
              {
                "category": "Manufacturing",
                "suggestions": [
                  "Add mounting holes (3.2mm for M3 screws)",
                  "Keep components >5mm from board edge",
                  "Add fiducial marks for automated assembly",
                  "Include version number on silkscreen"
                ]
              }
            ]
          },
          {
            "step": 5,
            "title": "Design Validation",
            "content": "Review design for errors and improvements",
            "details": {
              "errors": [
                "Missing decoupling capacitors - Add 0.1µF near each IC"
              ],
              "warnings": [
                "Consider adding 10-100µF bulk capacitor at power input",
                "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
                "Calculate and add current-limiting resistors for each IR LED"
              ],
              "suggestions": [],
              "score": 75,
              "status": "FAIL"
            }
          }
        ],
        "easyeda_schematic_plan": {
          "placement": "Organize components in logical groups",
          "routing": "Route power first, then signals",
          "ground_plane": "Use polygon pour for ground",
          "silkscreen": "Label all components and test points"
        }
      },
      "electronics_principles": {
        "relevant_concepts": [
          {
            "concept": "Digital Logic Levels",
            "explanation": "3.3V and 5V logic compatibility. Ensure voltage levels match or use level shifters.",
            "application": "Raspberry Pi Pico (3.3V) interfacing with 74HC595 (can run 2-6V)"
          },
          {
            "concept": "Current Limiting",
            "explanation": "LEDs need current-limiting resistors. Calculate using Ohm's Law: R = (Vsupply - Vled) / I",
            "application": "IR LEDs running at 100mA need 39Ω resistor from 5V supply"
          },
          {
            "concept": "Decoupling Capacitors",
            "explanation": "Filter noise on power supply. Place 0.1µF ceramic cap near each IC.",
            "application": "Prevents voltage droops during switching, improves signal integrity"
          },
          {
            "concept": "MOSFET Switching",
            "explanation": "MOSFETs act as electronic switches. Gate voltage controls drain-source conduction.",
            "application": "Switch high-current IR LEDs without overloading GPIO pins"
          },
          {
            "concept": "Shift Registers",
            "explanation": "Convert serial data to parallel outputs. Expand limited GPIO pins.",
            "application": "74HC595 provides 8 outputs using only 3 control pins"
          }
        ],
        "physics": [
          {
            "principle": "Ohm's Law",
            "formula": "V = I × R",
            "application": "Calculate resistor values for current limiting",
            "example": "For 100mA through LED: R = (5V - 1.35V) / 0.1A = 36.5Ω"
          },
          {
            "principle": "Power Dissipation",
            "formula": "P = V × I = I² × R",
            "application": "Determine component power ratings and heat generation",
            "example": "Resistor: P = 0.1² × 39 = 0.39W (use 0.5W resistor)"
          },
          {
            "principle": "Capacitor Charge/Discharge",
            "formula": "Q = C × V, τ = R × C",
            "application": "Filter power supply noise and smooth voltage",
            "example": "0.1µF cap filters high-frequency noise, 100µF handles load transients"
          },
          {
            "principle": "Electromagnetic Induction",
            "formula": "V = -L × dI/dt",
            "application": "Inductive loads need flyback diodes",
            "example": "Not applicable for LEDs, but critical for motors/relays"
          },
          {
            "principle": "Signal Integrity",
            "formula": "Z₀ = √(L/C), tr < 2×td",
            "application": "Transmission line effects on high-speed signals",
            "example": "SPI signals at 25MHz need controlled impedance traces"
          }
        ],
        "design_rules": {
          "power": {
            "description": "Power distribution and regulation rules",
            "rules": [
              "Always use common ground for all PCBs in system",
              "Add bulk capacitor (10µF-100µF) at power input",
              "Add 0.1µF ceramic capacitor near each IC",
              "Calculate total current draw to size power supply",
              "Use wider traces for power (>20mil for 500mA+)",
              "Add reverse polarity protection diode at input",
              "Consider TVS diode for industrial applications",
              "Separate analog and digital ground with single connection point"
            ]
          },
          "signals": {
            "description": "Signal routing and integrity",
            "rules": [
              "Keep high-speed signals short and direct",
              "Avoid 90-degree turns, use 45-degree bends",
              "Keep clock and data lines away from noisy signals",
              "Add series termination resistor (22-33Ω) for long traces",
              "Use differential pairs for critical signals",
              "Shield sensitive signals with ground plane",
              "Minimum 8mil trace width for signals",
              "Keep parallel signal traces spaced 3x trace width apart"
            ]
          },
          "thermal": {
            "description": "Heat management",
            "rules": [
              "Calculate power dissipation: P = I² × R",
              "Add thermal vias under hot components",
              "Ensure adequate copper area for heat spreading",
              "Leave space around components for airflow",
              "Consider heatsink for >1W dissipation",
              "Use thermal relief on ground pours for easier soldering",
              "Keep temperature-sensitive components away from heat sources"
            ]
          },
          "emc": {
            "description": "Electromagnetic compatibility",
            "rules": [
              "Use ground plane to reduce EMI",
              "Add ferrite bead on power input",
              "Route return current paths carefully",
              "Keep high-frequency circuits away from connectors",
              "Add filtering capacitors on all I/O lines",
              "Use shielded cables for off-board signals",
              "Follow 20-H rule for PCB stackup"
            ]
          }
        }
      }
    },
    {
      "instruction": "Design a PCB for: Dual PCB IR Control System – Schematic Connection Table",
      "input": {
        "requirements": [
          "Read 0 IR receivers",
          "Control 1 IR LEDs",
          "Use microcontroller for processing",
          "Interface between two PCBs",
          "5V power supply"
        ],
        "constraints": {
          "voltage": "5V power supply",
          "components_available": [
            null,
            "TSAL6400",
            "Raspberry Pi Pico",
            "74HC595"
          ]
        }
      },
      "output": {
        "design_analysis": {
          "design": "Dual PCB IR Control System – Schematic Connection Table",
          "timestamp": "2026-02-01T02:48:58.398Z",
          "components": [
            {
              "component": {
                "type": "MOSFET",
                "name": "Q1"
              },
              "electronics_knowledge": {},
              "function": "MOSFET Switch - Acts as electronic switch to control high-current IR LED.",
              "requirements": []
            },
            {
              "component": {
                "type": "IR_LED",
                "model": "TSAL6400",
                "channel": 1
              },
              "electronics_knowledge": {
                "type": "IR LED",
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "wavelength": "940nm",
                "knowledge": "High-power infrared LED for remote control applications",
                "bestPractices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ]
              },
              "function": "Infrared LED - Emits 940nm IR light for remote control transmission.",
              "requirements": {
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "best_practices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ],
                "required_components": [
                  {
                    "type": "resistor",
                    "value": "39Ω (for 100mA)",
                    "placement": "Series with LED",
                    "purpose": "Current limiting",
                    "calculation": "R = (5V - 1.35V) / 0.1A = 36.5Ω → use 39Ω"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "MCU",
                "model": "Raspberry Pi Pico",
                "name": "U1",
                "board": "PCB A"
              },
              "electronics_knowledge": {
                "type": "Microcontroller",
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "gpioVoltage": "3.3V",
                "maxCurrent": "300mA per GPIO",
                "totalGPIO": 26,
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ]
              },
              "function": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
              "requirements": {
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "Near each VCC pin",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "capacitor",
                    "value": "10µF",
                    "placement": "At power input",
                    "purpose": "Bulk filtering"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "SHIFT_REGISTER",
                "model": "74HC595",
                "name": "U2",
                "board": "PCB B"
              },
              "electronics_knowledge": {
                "type": "Shift Register",
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "outputs": 8,
                "cascadable": true,
                "knowledge": "8-bit serial-to-parallel shift register with output latches",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ]
              },
              "function": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
              "requirements": {
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "VCC to GND",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "resistor",
                    "value": "220-470Ω",
                    "placement": "On each output to MOSFET gate",
                    "purpose": "Current limiting"
                  }
                ]
              }
            }
          ],
          "connections": [
            {
              "connection": {
                "type": "CONTROL_SIGNAL",
                "from": {
                  "component": "Raspberry Pi Pico"
                },
                "to": {
                  "component": "74HC595"
                }
              },
              "signal_type": "Digital Control",
              "voltage_level": "3.3V Logic",
              "validation": {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              "recommendations": []
            },
            {
              "connection": {
                "from": {
                  "component": "74HC595"
                },
                "to": {
                  "component": "Q1",
                  "pin": "Gate"
                }
              },
              "signal_type": "MOSFET Gate Drive",
              "voltage_level": "5V Logic (HC family)",
              "validation": {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              "recommendations": [
                "Add 220-470Ω series resistor",
                "Add 10kΩ pull-down resistor gate-to-ground",
                "Keep gate trace short to prevent ringing"
              ]
            },
            {
              "connection": {
                "from": {
                  "component": "Q1",
                  "pin": "Drain"
                },
                "to": {
                  "pin": "Cathode"
                }
              },
              "signal_type": "General Signal",
              "voltage_level": "Verify voltage level",
              "validation": {
                "issues": [],
                "warnings": []
              },
              "recommendations": []
            }
          ],
          "validation": {
            "errors": [
              "Missing decoupling capacitors - Add 0.1µF near each IC"
            ],
            "warnings": [
              "Consider adding 10-100µF bulk capacitor at power input",
              "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
              "Calculate and add current-limiting resistors for each IR LED"
            ],
            "suggestions": [],
            "score": 75,
            "status": "FAIL"
          },
          "suggestions": [
            {
              "category": "Power",
              "suggestions": [
                "Add reverse polarity protection diode at power input",
                "Use TVS diode for ESD protection",
                "Add LED power indicator with 1kΩ resistor",
                "Consider adding test points for VCC and GND"
              ]
            },
            {
              "category": "Signal Integrity",
              "suggestions": [
                "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                "Use ground plane under signal traces",
                "Add series termination on long traces (>6 inches)",
                "Keep IR receivers away from IR LEDs"
              ]
            },
            {
              "category": "Testing & Debug",
              "suggestions": [
                "Add test points for each GPIO connection",
                "Include LED indicators for shift register outputs",
                "Add jumpers for easy debugging",
                "Label all connectors on silkscreen"
              ]
            },
            {
              "category": "Manufacturing",
              "suggestions": [
                "Add mounting holes (3.2mm for M3 screws)",
                "Keep components >5mm from board edge",
                "Add fiducial marks for automated assembly",
                "Include version number on silkscreen"
              ]
            }
          ],
          "calculations": {
            "led_resistor": {
              "description": "IR LED current limiting resistor",
              "formula": "R = (Vsupply - Vled) / I_desired",
              "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
              "standard_value": "39Ω (nearest E12 series)",
              "power_rating": "0.365W (use 0.25W resistor)",
              "actual_current": "93.6mA"
            },
            "power_budget": {
              "description": "Total system current draw",
              "breakdown": {
                "ir_receivers": "0 × 0.4mA = 0.0mA",
                "ir_leds": "1 × 100mA = 100mA",
                "ics": "2 × 20mA = 40mA"
              },
              "total": "140.0mA",
              "recommended_supply": "500mA",
              "power": "0.70W at 5V"
            },
            "trace_width": {
              "description": "Minimum trace width for current",
              "current": "140mA",
              "recommendation": "Use 20mil traces for power",
              "signal_traces": "8-10mil for digital signals"
            }
          }
        },
        "step_by_step_approach": [
          {
            "step": 1,
            "title": "Component Selection",
            "content": "Choose appropriate components based on requirements",
            "details": [
              {
                "reason": "MOSFET Switch - Acts as electronic switch to control high-current IR LED."
              },
              {
                "component": "TSAL6400",
                "reason": "Infrared LED - Emits 940nm IR light for remote control transmission.",
                "knowledge": "High-power infrared LED for remote control applications"
              },
              {
                "component": "Raspberry Pi Pico",
                "reason": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices."
              },
              {
                "component": "74HC595",
                "reason": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
                "knowledge": "8-bit serial-to-parallel shift register with output latches"
              }
            ]
          },
          {
            "step": 2,
            "title": "Calculate Passive Components",
            "content": "Determine resistor and capacitor values",
            "details": {
              "led_resistor": {
                "description": "IR LED current limiting resistor",
                "formula": "R = (Vsupply - Vled) / I_desired",
                "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
                "standard_value": "39Ω (nearest E12 series)",
                "power_rating": "0.365W (use 0.25W resistor)",
                "actual_current": "93.6mA"
              },
              "power_budget": {
                "description": "Total system current draw",
                "breakdown": {
                  "ir_receivers": "0 × 0.4mA = 0.0mA",
                  "ir_leds": "1 × 100mA = 100mA",
                  "ics": "2 × 20mA = 40mA"
                },
                "total": "140.0mA",
                "recommended_supply": "500mA",
                "power": "0.70W at 5V"
              },
              "trace_width": {
                "description": "Minimum trace width for current",
                "current": "140mA",
                "recommendation": "Use 20mil traces for power",
                "signal_traces": "8-10mil for digital signals"
              }
            }
          },
          {
            "step": 3,
            "title": "Validate Connections",
            "content": "Check voltage levels and current capacity",
            "details": [
              {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              {
                "issues": [],
                "warnings": []
              }
            ]
          },
          {
            "step": 4,
            "title": "Apply Best Practices",
            "content": "Add decoupling, protection, and filtering",
            "details": [
              {
                "category": "Power",
                "suggestions": [
                  "Add reverse polarity protection diode at power input",
                  "Use TVS diode for ESD protection",
                  "Add LED power indicator with 1kΩ resistor",
                  "Consider adding test points for VCC and GND"
                ]
              },
              {
                "category": "Signal Integrity",
                "suggestions": [
                  "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                  "Use ground plane under signal traces",
                  "Add series termination on long traces (>6 inches)",
                  "Keep IR receivers away from IR LEDs"
                ]
              },
              {
                "category": "Testing & Debug",
                "suggestions": [
                  "Add test points for each GPIO connection",
                  "Include LED indicators for shift register outputs",
                  "Add jumpers for easy debugging",
                  "Label all connectors on silkscreen"
                ]
              },
              {
                "category": "Manufacturing",
                "suggestions": [
                  "Add mounting holes (3.2mm for M3 screws)",
                  "Keep components >5mm from board edge",
                  "Add fiducial marks for automated assembly",
                  "Include version number on silkscreen"
                ]
              }
            ]
          },
          {
            "step": 5,
            "title": "Design Validation",
            "content": "Review design for errors and improvements",
            "details": {
              "errors": [
                "Missing decoupling capacitors - Add 0.1µF near each IC"
              ],
              "warnings": [
                "Consider adding 10-100µF bulk capacitor at power input",
                "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
                "Calculate and add current-limiting resistors for each IR LED"
              ],
              "suggestions": [],
              "score": 75,
              "status": "FAIL"
            }
          }
        ],
        "easyeda_schematic_plan": {
          "placement": "Organize components in logical groups",
          "routing": "Route power first, then signals",
          "ground_plane": "Use polygon pour for ground",
          "silkscreen": "Label all components and test points"
        }
      },
      "electronics_principles": {
        "relevant_concepts": [
          {
            "concept": "Digital Logic Levels",
            "explanation": "3.3V and 5V logic compatibility. Ensure voltage levels match or use level shifters.",
            "application": "Raspberry Pi Pico (3.3V) interfacing with 74HC595 (can run 2-6V)"
          },
          {
            "concept": "Current Limiting",
            "explanation": "LEDs need current-limiting resistors. Calculate using Ohm's Law: R = (Vsupply - Vled) / I",
            "application": "IR LEDs running at 100mA need 39Ω resistor from 5V supply"
          },
          {
            "concept": "Decoupling Capacitors",
            "explanation": "Filter noise on power supply. Place 0.1µF ceramic cap near each IC.",
            "application": "Prevents voltage droops during switching, improves signal integrity"
          },
          {
            "concept": "MOSFET Switching",
            "explanation": "MOSFETs act as electronic switches. Gate voltage controls drain-source conduction.",
            "application": "Switch high-current IR LEDs without overloading GPIO pins"
          },
          {
            "concept": "Shift Registers",
            "explanation": "Convert serial data to parallel outputs. Expand limited GPIO pins.",
            "application": "74HC595 provides 8 outputs using only 3 control pins"
          }
        ],
        "physics": [
          {
            "principle": "Ohm's Law",
            "formula": "V = I × R",
            "application": "Calculate resistor values for current limiting",
            "example": "For 100mA through LED: R = (5V - 1.35V) / 0.1A = 36.5Ω"
          },
          {
            "principle": "Power Dissipation",
            "formula": "P = V × I = I² × R",
            "application": "Determine component power ratings and heat generation",
            "example": "Resistor: P = 0.1² × 39 = 0.39W (use 0.5W resistor)"
          },
          {
            "principle": "Capacitor Charge/Discharge",
            "formula": "Q = C × V, τ = R × C",
            "application": "Filter power supply noise and smooth voltage",
            "example": "0.1µF cap filters high-frequency noise, 100µF handles load transients"
          },
          {
            "principle": "Electromagnetic Induction",
            "formula": "V = -L × dI/dt",
            "application": "Inductive loads need flyback diodes",
            "example": "Not applicable for LEDs, but critical for motors/relays"
          },
          {
            "principle": "Signal Integrity",
            "formula": "Z₀ = √(L/C), tr < 2×td",
            "application": "Transmission line effects on high-speed signals",
            "example": "SPI signals at 25MHz need controlled impedance traces"
          }
        ],
        "design_rules": {
          "power": {
            "description": "Power distribution and regulation rules",
            "rules": [
              "Always use common ground for all PCBs in system",
              "Add bulk capacitor (10µF-100µF) at power input",
              "Add 0.1µF ceramic capacitor near each IC",
              "Calculate total current draw to size power supply",
              "Use wider traces for power (>20mil for 500mA+)",
              "Add reverse polarity protection diode at input",
              "Consider TVS diode for industrial applications",
              "Separate analog and digital ground with single connection point"
            ]
          },
          "signals": {
            "description": "Signal routing and integrity",
            "rules": [
              "Keep high-speed signals short and direct",
              "Avoid 90-degree turns, use 45-degree bends",
              "Keep clock and data lines away from noisy signals",
              "Add series termination resistor (22-33Ω) for long traces",
              "Use differential pairs for critical signals",
              "Shield sensitive signals with ground plane",
              "Minimum 8mil trace width for signals",
              "Keep parallel signal traces spaced 3x trace width apart"
            ]
          },
          "thermal": {
            "description": "Heat management",
            "rules": [
              "Calculate power dissipation: P = I² × R",
              "Add thermal vias under hot components",
              "Ensure adequate copper area for heat spreading",
              "Leave space around components for airflow",
              "Consider heatsink for >1W dissipation",
              "Use thermal relief on ground pours for easier soldering",
              "Keep temperature-sensitive components away from heat sources"
            ]
          },
          "emc": {
            "description": "Electromagnetic compatibility",
            "rules": [
              "Use ground plane to reduce EMI",
              "Add ferrite bead on power input",
              "Route return current paths carefully",
              "Keep high-frequency circuits away from connectors",
              "Add filtering capacitors on all I/O lines",
              "Use shielded cables for off-board signals",
              "Follow 20-H rule for PCB stackup"
            ]
          }
        }
      }
    },
    {
      "instruction": "Design a PCB for: Dual PCB IR Control System – Schematic Connection Table",
      "input": {
        "requirements": [
          "Read 0 IR receivers",
          "Control 1 IR LEDs",
          "Use microcontroller for processing",
          "Interface between two PCBs",
          "5V power supply"
        ],
        "constraints": {
          "voltage": "5V power supply",
          "components_available": [
            null,
            "TSAL6400",
            "Raspberry Pi Pico",
            "74HC595"
          ]
        }
      },
      "output": {
        "design_analysis": {
          "design": "Dual PCB IR Control System – Schematic Connection Table",
          "timestamp": "2026-02-01T02:48:58.398Z",
          "components": [
            {
              "component": {
                "type": "MOSFET",
                "name": "Q1"
              },
              "electronics_knowledge": {},
              "function": "MOSFET Switch - Acts as electronic switch to control high-current IR LED.",
              "requirements": []
            },
            {
              "component": {
                "type": "IR_LED",
                "model": "TSAL6400",
                "channel": 1
              },
              "electronics_knowledge": {
                "type": "IR LED",
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "wavelength": "940nm",
                "knowledge": "High-power infrared LED for remote control applications",
                "bestPractices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ]
              },
              "function": "Infrared LED - Emits 940nm IR light for remote control transmission.",
              "requirements": {
                "voltage": {
                  "forward": "1.35V typical, 1.6V max"
                },
                "current": {
                  "continuous": "100mA",
                  "peak": "1A (pulsed)"
                },
                "best_practices": [
                  "Use current-limiting resistor: R = (Vsupply - 1.35V) / I_desired",
                  "For 100mA @ 5V: R = (5 - 1.35) / 0.1 = 36.5Ω (use 39Ω)",
                  "Use MOSFET for switching (not direct from GPIO)",
                  "Add heatsink if running continuous > 50mA",
                  "Pulse at high current (500mA) with low duty cycle for better range"
                ],
                "required_components": [
                  {
                    "type": "resistor",
                    "value": "39Ω (for 100mA)",
                    "placement": "Series with LED",
                    "purpose": "Current limiting",
                    "calculation": "R = (5V - 1.35V) / 0.1A = 36.5Ω → use 39Ω"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "MCU",
                "model": "Raspberry Pi Pico",
                "name": "U1",
                "board": "PCB A"
              },
              "electronics_knowledge": {
                "type": "Microcontroller",
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "gpioVoltage": "3.3V",
                "maxCurrent": "300mA per GPIO",
                "totalGPIO": 26,
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices.",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ]
              },
              "function": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
              "requirements": {
                "voltage": {
                  "operating": "3.3V",
                  "input": "5V via USB"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor near each power pin",
                  "Use 10kΩ pull-up/pull-down resistors on unused pins",
                  "Protect GPIO with 220-330Ω series resistor for LEDs",
                  "Maximum 16mA per GPIO pin"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "Near each VCC pin",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "capacitor",
                    "value": "10µF",
                    "placement": "At power input",
                    "purpose": "Bulk filtering"
                  }
                ]
              }
            },
            {
              "component": {
                "type": "SHIFT_REGISTER",
                "model": "74HC595",
                "name": "U2",
                "board": "PCB B"
              },
              "electronics_knowledge": {
                "type": "Shift Register",
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "outputs": 8,
                "cascadable": true,
                "knowledge": "8-bit serial-to-parallel shift register with output latches",
                "bestPractices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ]
              },
              "function": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
              "requirements": {
                "voltage": {
                  "operating": "2V-6V"
                },
                "current": {
                  "max": "70mA per output"
                },
                "best_practices": [
                  "Add 0.1µF decoupling capacitor between VCC and GND",
                  "Use 220-470Ω resistors on MOSFET gate connections",
                  "Can cascade multiple 74HC595 using QH' pin",
                  "OE pin should be LOW for active outputs (pull to GND via 10kΩ)",
                  "Maximum clock frequency: 25MHz @ 5V"
                ],
                "required_components": [
                  {
                    "type": "capacitor",
                    "value": "0.1µF",
                    "placement": "VCC to GND",
                    "purpose": "Decoupling"
                  },
                  {
                    "type": "resistor",
                    "value": "220-470Ω",
                    "placement": "On each output to MOSFET gate",
                    "purpose": "Current limiting"
                  }
                ]
              }
            }
          ],
          "connections": [
            {
              "connection": {
                "type": "CONTROL_SIGNAL",
                "from": {
                  "component": "Raspberry Pi Pico"
                },
                "to": {
                  "component": "74HC595"
                }
              },
              "signal_type": "Digital Control",
              "voltage_level": "3.3V Logic",
              "validation": {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              "recommendations": []
            },
            {
              "connection": {
                "from": {
                  "component": "74HC595"
                },
                "to": {
                  "component": "Q1",
                  "pin": "Gate"
                }
              },
              "signal_type": "MOSFET Gate Drive",
              "voltage_level": "5V Logic (HC family)",
              "validation": {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              "recommendations": [
                "Add 220-470Ω series resistor",
                "Add 10kΩ pull-down resistor gate-to-ground",
                "Keep gate trace short to prevent ringing"
              ]
            },
            {
              "connection": {
                "from": {
                  "component": "Q1",
                  "pin": "Drain"
                },
                "to": {
                  "pin": "Cathode"
                }
              },
              "signal_type": "General Signal",
              "voltage_level": "Verify voltage level",
              "validation": {
                "issues": [],
                "warnings": []
              },
              "recommendations": []
            }
          ],
          "validation": {
            "errors": [
              "Missing decoupling capacitors - Add 0.1µF near each IC"
            ],
            "warnings": [
              "Consider adding 10-100µF bulk capacitor at power input",
              "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
              "Calculate and add current-limiting resistors for each IR LED"
            ],
            "suggestions": [],
            "score": 75,
            "status": "FAIL"
          },
          "suggestions": [
            {
              "category": "Power",
              "suggestions": [
                "Add reverse polarity protection diode at power input",
                "Use TVS diode for ESD protection",
                "Add LED power indicator with 1kΩ resistor",
                "Consider adding test points for VCC and GND"
              ]
            },
            {
              "category": "Signal Integrity",
              "suggestions": [
                "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                "Use ground plane under signal traces",
                "Add series termination on long traces (>6 inches)",
                "Keep IR receivers away from IR LEDs"
              ]
            },
            {
              "category": "Testing & Debug",
              "suggestions": [
                "Add test points for each GPIO connection",
                "Include LED indicators for shift register outputs",
                "Add jumpers for easy debugging",
                "Label all connectors on silkscreen"
              ]
            },
            {
              "category": "Manufacturing",
              "suggestions": [
                "Add mounting holes (3.2mm for M3 screws)",
                "Keep components >5mm from board edge",
                "Add fiducial marks for automated assembly",
                "Include version number on silkscreen"
              ]
            }
          ],
          "calculations": {
            "led_resistor": {
              "description": "IR LED current limiting resistor",
              "formula": "R = (Vsupply - Vled) / I_desired",
              "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
              "standard_value": "39Ω (nearest E12 series)",
              "power_rating": "0.365W (use 0.25W resistor)",
              "actual_current": "93.6mA"
            },
            "power_budget": {
              "description": "Total system current draw",
              "breakdown": {
                "ir_receivers": "0 × 0.4mA = 0.0mA",
                "ir_leds": "1 × 100mA = 100mA",
                "ics": "2 × 20mA = 40mA"
              },
              "total": "140.0mA",
              "recommended_supply": "500mA",
              "power": "0.70W at 5V"
            },
            "trace_width": {
              "description": "Minimum trace width for current",
              "current": "140mA",
              "recommendation": "Use 20mil traces for power",
              "signal_traces": "8-10mil for digital signals"
            }
          }
        },
        "step_by_step_approach": [
          {
            "step": 1,
            "title": "Component Selection",
            "content": "Choose appropriate components based on requirements",
            "details": [
              {
                "reason": "MOSFET Switch - Acts as electronic switch to control high-current IR LED."
              },
              {
                "component": "TSAL6400",
                "reason": "Infrared LED - Emits 940nm IR light for remote control transmission.",
                "knowledge": "High-power infrared LED for remote control applications"
              },
              {
                "component": "Raspberry Pi Pico",
                "reason": "Microcontroller - Controls the entire system. Reads U1 inputs and generates outputs.",
                "knowledge": "GPIO pins are 3.3V logic. Need level shifters for 5V devices."
              },
              {
                "component": "74HC595",
                "reason": "Shift Register - Converts serial data to parallel outputs for controlling multiple devices.",
                "knowledge": "8-bit serial-to-parallel shift register with output latches"
              }
            ]
          },
          {
            "step": 2,
            "title": "Calculate Passive Components",
            "content": "Determine resistor and capacitor values",
            "details": {
              "led_resistor": {
                "description": "IR LED current limiting resistor",
                "formula": "R = (Vsupply - Vled) / I_desired",
                "calculation": "R = (5V - 1.35V) / 0.1A = 36.50Ω",
                "standard_value": "39Ω (nearest E12 series)",
                "power_rating": "0.365W (use 0.25W resistor)",
                "actual_current": "93.6mA"
              },
              "power_budget": {
                "description": "Total system current draw",
                "breakdown": {
                  "ir_receivers": "0 × 0.4mA = 0.0mA",
                  "ir_leds": "1 × 100mA = 100mA",
                  "ics": "2 × 20mA = 40mA"
                },
                "total": "140.0mA",
                "recommended_supply": "500mA",
                "power": "0.70W at 5V"
              },
              "trace_width": {
                "description": "Minimum trace width for current",
                "current": "140mA",
                "recommendation": "Use 20mil traces for power",
                "signal_traces": "8-10mil for digital signals"
              }
            }
          },
          {
            "step": 3,
            "title": "Validate Connections",
            "content": "Check voltage levels and current capacity",
            "details": [
              {
                "issues": [],
                "warnings": [
                  "3.3V GPIO to 5V IC - Ensure 74HC595 runs at 3.3V or use level shifter"
                ]
              },
              {
                "issues": [
                  "Add 220-470Ω series resistor on MOSFET gate"
                ],
                "warnings": []
              },
              {
                "issues": [],
                "warnings": []
              }
            ]
          },
          {
            "step": 4,
            "title": "Apply Best Practices",
            "content": "Add decoupling, protection, and filtering",
            "details": [
              {
                "category": "Power",
                "suggestions": [
                  "Add reverse polarity protection diode at power input",
                  "Use TVS diode for ESD protection",
                  "Add LED power indicator with 1kΩ resistor",
                  "Consider adding test points for VCC and GND"
                ]
              },
              {
                "category": "Signal Integrity",
                "suggestions": [
                  "Keep SPI signals (DATA, CLOCK, LATCH) close together",
                  "Use ground plane under signal traces",
                  "Add series termination on long traces (>6 inches)",
                  "Keep IR receivers away from IR LEDs"
                ]
              },
              {
                "category": "Testing & Debug",
                "suggestions": [
                  "Add test points for each GPIO connection",
                  "Include LED indicators for shift register outputs",
                  "Add jumpers for easy debugging",
                  "Label all connectors on silkscreen"
                ]
              },
              {
                "category": "Manufacturing",
                "suggestions": [
                  "Add mounting holes (3.2mm for M3 screws)",
                  "Keep components >5mm from board edge",
                  "Add fiducial marks for automated assembly",
                  "Include version number on silkscreen"
                ]
              }
            ]
          },
          {
            "step": 5,
            "title": "Design Validation",
            "content": "Review design for errors and improvements",
            "details": {
              "errors": [
                "Missing decoupling capacitors - Add 0.1µF near each IC"
              ],
              "warnings": [
                "Consider adding 10-100µF bulk capacitor at power input",
                "Ensure each MOSFET has gate resistor (220-470Ω) and pull-down (10kΩ)",
                "Calculate and add current-limiting resistors for each IR LED"
              ],
              "suggestions": [],
              "score": 75,
              "status": "FAIL"
            }
          }
        ],
        "easyeda_schematic_plan": {
          "placement": "Organize components in logical groups",
          "routing": "Route power first, then signals",
          "ground_plane": "Use polygon pour for ground",
          "silkscreen": "Label all components and test points"
        }
      },
      "electronics_principles": {
        "relevant_concepts": [
          {
            "concept": "Digital Logic Levels",
            "explanation": "3.3V and 5V logic compatibility. Ensure voltage levels match or use level shifters.",
            "application": "Raspberry Pi Pico (3.3V) interfacing with 74HC595 (can run 2-6V)"
          },
          {
            "concept": "Current Limiting",
            "explanation": "LEDs need current-limiting resistors. Calculate using Ohm's Law: R = (Vsupply - Vled) / I",
            "application": "IR LEDs running at 100mA need 39Ω resistor from 5V supply"
          },
          {
            "concept": "Decoupling Capacitors",
            "explanation": "Filter noise on power supply. Place 0.1µF ceramic cap near each IC.",
            "application": "Prevents voltage droops during switching, improves signal integrity"
          },
          {
            "concept": "MOSFET Switching",
            "explanation": "MOSFETs act as electronic switches. Gate voltage controls drain-source conduction.",
            "application": "Switch high-current IR LEDs without overloading GPIO pins"
          },
          {
            "concept": "Shift Registers",
            "explanation": "Convert serial data to parallel outputs. Expand limited GPIO pins.",
            "application": "74HC595 provides 8 outputs using only 3 control pins"
          }
        ],
        "physics": [
          {
            "principle": "Ohm's Law",
            "formula": "V = I × R",
            "application": "Calculate resistor values for current limiting",
            "example": "For 100mA through LED: R = (5V - 1.35V) / 0.1A = 36.5Ω"
          },
          {
            "principle": "Power Dissipation",
            "formula": "P = V × I = I² × R",
            "application": "Determine component power ratings and heat generation",
            "example": "Resistor: P = 0.1² × 39 = 0.39W (use 0.5W resistor)"
          },
          {
            "principle": "Capacitor Charge/Discharge",
            "formula": "Q = C × V, τ = R × C",
            "application": "Filter power supply noise and smooth voltage",
            "example": "0.1µF cap filters high-frequency noise, 100µF handles load transients"
          },
          {
            "principle": "Electromagnetic Induction",
            "formula": "V = -L × dI/dt",
            "application": "Inductive loads need flyback diodes",
            "example": "Not applicable for LEDs, but critical for motors/relays"
          },
          {
            "principle": "Signal Integrity",
            "formula": "Z₀ = √(L/C), tr < 2×td",
            "application": "Transmission line effects on high-speed signals",
            "example": "SPI signals at 25MHz need controlled impedance traces"
          }
        ],
        "design_rules": {
          "power": {
            "description": "Power distribution and regulation rules",
            "rules": [
              "Always use common ground for all PCBs in system",
              "Add bulk capacitor (10µF-100µF) at power input",
              "Add 0.1µF ceramic capacitor near each IC",
              "Calculate total current draw to size power supply",
              "Use wider traces for power (>20mil for 500mA+)",
              "Add reverse polarity protection diode at input",
              "Consider TVS diode for industrial applications",
              "Separate analog and digital ground with single connection point"
            ]
          },
          "signals": {
            "description": "Signal routing and integrity",
            "rules": [
              "Keep high-speed signals short and direct",
              "Avoid 90-degree turns, use 45-degree bends",
              "Keep clock and data lines away from noisy signals",
              "Add series termination resistor (22-33Ω) for long traces",
              "Use differential pairs for critical signals",
              "Shield sensitive signals with ground plane",
              "Minimum 8mil trace width for signals",
              "Keep parallel signal traces spaced 3x trace width apart"
            ]
          },
          "thermal": {
            "description": "Heat management",
            "rules": [
              "Calculate power dissipation: P = I² × R",
              "Add thermal vias under hot components",
              "Ensure adequate copper area for heat spreading",
              "Leave space around components for airflow",
              "Consider heatsink for >1W dissipation",
              "Use thermal relief on ground pours for easier soldering",
              "Keep temperature-sensitive components away from heat sources"
            ]
          },
          "emc": {
            "description": "Electromagnetic compatibility",
            "rules": [
              "Use ground plane to reduce EMI",
              "Add ferrite bead on power input",
              "Route return current paths carefully",
              "Keep high-frequency circuits away from connectors",
              "Add filtering capacitors on all I/O lines",
              "Use shielded cables for off-board signals",
              "Follow 20-H rule for PCB stackup"
            ]
          }
        }
      }
    }
  ]
}